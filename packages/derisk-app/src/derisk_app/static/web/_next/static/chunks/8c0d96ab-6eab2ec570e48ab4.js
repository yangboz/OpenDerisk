"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5745],{16926:function(e,t,r){let n;r.d(t,{Ab:function(){return eL},ED:function(){return eE},F3:function(){return e2},FB:function(){return z},Fp:function(){return en},GI:function(){return ee},Id:function(){return tt},Kd:function(){return et},Kz:function(){return Q},LJ:function(){return e5},MP:function(){return q},OB:function(){return k},PU:function(){return eq},R$:function(){return ei},RH:function(){return eU},Wf:function(){return W},X9:function(){return Y},YV:function(){return Z},bt:function(){return V},f$:function(){return K},j8:function(){return tQ},oX:function(){return tS},v2:function(){return $},wb:function(){return X},yA:function(){return e7},zC:function(){return e3},zi:function(){return H},zo:function(){return rM}});var i,a,o,s,_,E,u,l,R,c,T,A,d,f,p,h,S,N,B,C,F,g,O,m,I,M,U,L,D,P,v,G,b,y,x,X,w,W,H,V,k,Y,K,Z,z,q,Q,j,J,$,ee,et,er,en,ei,ea,eo,es,e_,eE,eu,el,eR,ec,eT,eA=r(54663),ed=r(22355),ef=r(63777),ep=r(15767),eh=r(73983);function eS(e,t,r){return e<<16|t<<8|r}function eN(e){return e>>>8&255}function eB(e){return e>>>16&255}function eC(e){switch(e){case eo.F32:case eo.U32:case eo.S32:return 4;case eo.U16:case eo.S16:case eo.F16:return 2;case eo.U8:case eo.S8:return 1;default:throw Error("whoops")}}function eF(e){var t=255&e;if(t&e_.Depth)return er.Depth;if(t&e_.Normalized)return er.Float;var r=eB(e);if(r===eo.F16||r===eo.F32)return er.Float;if(r===eo.U8||r===eo.U16||r===eo.U32)return er.Uint;if(r===eo.S8||r===eo.S16||r===eo.S32)return er.Sint;throw Error("whoops")}function eg(e,t){if(void 0===t&&(t=""),!e)throw Error("Assert fail: ".concat(t))}function eO(e){if(null!=e)return e;throw Error("Missing object")}function em(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function eI(e,t){e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a}function eM(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}function eU(e,t,r,n){return void 0===n&&(n=1),{r:e,g:t,b:r,a:n}}(_=y||(y={}))[_.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",_[_.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",_[_.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",_[_.POINTS=0]="POINTS",_[_.LINES=1]="LINES",_[_.LINE_LOOP=2]="LINE_LOOP",_[_.LINE_STRIP=3]="LINE_STRIP",_[_.TRIANGLES=4]="TRIANGLES",_[_.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_[_.TRIANGLE_FAN=6]="TRIANGLE_FAN",_[_.ZERO=0]="ZERO",_[_.ONE=1]="ONE",_[_.SRC_COLOR=768]="SRC_COLOR",_[_.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",_[_.SRC_ALPHA=770]="SRC_ALPHA",_[_.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",_[_.DST_ALPHA=772]="DST_ALPHA",_[_.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",_[_.DST_COLOR=774]="DST_COLOR",_[_.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",_[_.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",_[_.CONSTANT_COLOR=32769]="CONSTANT_COLOR",_[_.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",_[_.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",_[_.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",_[_.FUNC_ADD=32774]="FUNC_ADD",_[_.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",_[_.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",_[_.BLEND_EQUATION=32777]="BLEND_EQUATION",_[_.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",_[_.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",_[_.BLEND_DST_RGB=32968]="BLEND_DST_RGB",_[_.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",_[_.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",_[_.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",_[_.BLEND_COLOR=32773]="BLEND_COLOR",_[_.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",_[_.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",_[_.LINE_WIDTH=2849]="LINE_WIDTH",_[_.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",_[_.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",_[_.CULL_FACE_MODE=2885]="CULL_FACE_MODE",_[_.FRONT_FACE=2886]="FRONT_FACE",_[_.DEPTH_RANGE=2928]="DEPTH_RANGE",_[_.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",_[_.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",_[_.DEPTH_FUNC=2932]="DEPTH_FUNC",_[_.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",_[_.STENCIL_FUNC=2962]="STENCIL_FUNC",_[_.STENCIL_FAIL=2964]="STENCIL_FAIL",_[_.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",_[_.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",_[_.STENCIL_REF=2967]="STENCIL_REF",_[_.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",_[_.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",_[_.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",_[_.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",_[_.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",_[_.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",_[_.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",_[_.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",_[_.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",_[_.VIEWPORT=2978]="VIEWPORT",_[_.SCISSOR_BOX=3088]="SCISSOR_BOX",_[_.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",_[_.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",_[_.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",_[_.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",_[_.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",_[_.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",_[_.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",_[_.RED_BITS=3410]="RED_BITS",_[_.GREEN_BITS=3411]="GREEN_BITS",_[_.BLUE_BITS=3412]="BLUE_BITS",_[_.ALPHA_BITS=3413]="ALPHA_BITS",_[_.DEPTH_BITS=3414]="DEPTH_BITS",_[_.STENCIL_BITS=3415]="STENCIL_BITS",_[_.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",_[_.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",_[_.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",_[_.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",_[_.SAMPLES=32937]="SAMPLES",_[_.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",_[_.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",_[_.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",_[_.VENDOR=7936]="VENDOR",_[_.RENDERER=7937]="RENDERER",_[_.VERSION=7938]="VERSION",_[_.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",_[_.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",_[_.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",_[_.STATIC_DRAW=35044]="STATIC_DRAW",_[_.STREAM_DRAW=35040]="STREAM_DRAW",_[_.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",_[_.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_[_.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_[_.BUFFER_SIZE=34660]="BUFFER_SIZE",_[_.BUFFER_USAGE=34661]="BUFFER_USAGE",_[_.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",_[_.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",_[_.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",_[_.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",_[_.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",_[_.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",_[_.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",_[_.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",_[_.CULL_FACE=2884]="CULL_FACE",_[_.FRONT=1028]="FRONT",_[_.BACK=1029]="BACK",_[_.FRONT_AND_BACK=1032]="FRONT_AND_BACK",_[_.BLEND=3042]="BLEND",_[_.DEPTH_TEST=2929]="DEPTH_TEST",_[_.DITHER=3024]="DITHER",_[_.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",_[_.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",_[_.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",_[_.SCISSOR_TEST=3089]="SCISSOR_TEST",_[_.STENCIL_TEST=2960]="STENCIL_TEST",_[_.NO_ERROR=0]="NO_ERROR",_[_.INVALID_ENUM=1280]="INVALID_ENUM",_[_.INVALID_VALUE=1281]="INVALID_VALUE",_[_.INVALID_OPERATION=1282]="INVALID_OPERATION",_[_.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",_[_.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",_[_.CW=2304]="CW",_[_.CCW=2305]="CCW",_[_.DONT_CARE=4352]="DONT_CARE",_[_.FASTEST=4353]="FASTEST",_[_.NICEST=4354]="NICEST",_[_.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",_[_.BYTE=5120]="BYTE",_[_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_[_.SHORT=5122]="SHORT",_[_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_[_.INT=5124]="INT",_[_.UNSIGNED_INT=5125]="UNSIGNED_INT",_[_.FLOAT=5126]="FLOAT",_[_.DOUBLE=5130]="DOUBLE",_[_.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_[_.ALPHA=6406]="ALPHA",_[_.RGB=6407]="RGB",_[_.RGBA=6408]="RGBA",_[_.LUMINANCE=6409]="LUMINANCE",_[_.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_[_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_[_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_[_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_[_.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",_[_.VERTEX_SHADER=35633]="VERTEX_SHADER",_[_.COMPILE_STATUS=35713]="COMPILE_STATUS",_[_.DELETE_STATUS=35712]="DELETE_STATUS",_[_.LINK_STATUS=35714]="LINK_STATUS",_[_.VALIDATE_STATUS=35715]="VALIDATE_STATUS",_[_.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",_[_.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",_[_.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",_[_.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",_[_.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",_[_.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",_[_.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",_[_.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",_[_.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",_[_.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",_[_.SHADER_TYPE=35663]="SHADER_TYPE",_[_.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",_[_.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",_[_.NEVER=512]="NEVER",_[_.ALWAYS=519]="ALWAYS",_[_.LESS=513]="LESS",_[_.EQUAL=514]="EQUAL",_[_.LEQUAL=515]="LEQUAL",_[_.GREATER=516]="GREATER",_[_.GEQUAL=518]="GEQUAL",_[_.NOTEQUAL=517]="NOTEQUAL",_[_.KEEP=7680]="KEEP",_[_.REPLACE=7681]="REPLACE",_[_.INCR=7682]="INCR",_[_.DECR=7683]="DECR",_[_.INVERT=5386]="INVERT",_[_.INCR_WRAP=34055]="INCR_WRAP",_[_.DECR_WRAP=34056]="DECR_WRAP",_[_.NEAREST=9728]="NEAREST",_[_.LINEAR=9729]="LINEAR",_[_.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",_[_.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",_[_.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",_[_.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",_[_.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",_[_.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",_[_.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",_[_.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",_[_.TEXTURE_2D=3553]="TEXTURE_2D",_[_.TEXTURE=5890]="TEXTURE",_[_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_[_.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",_[_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_[_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_[_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_[_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_[_.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",_[_.TEXTURE0=33984]="TEXTURE0",_[_.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",_[_.REPEAT=10497]="REPEAT",_[_.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",_[_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",_[_.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",_[_.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",_[_.FLOAT_VEC2=35664]="FLOAT_VEC2",_[_.FLOAT_VEC3=35665]="FLOAT_VEC3",_[_.FLOAT_VEC4=35666]="FLOAT_VEC4",_[_.INT_VEC2=35667]="INT_VEC2",_[_.INT_VEC3=35668]="INT_VEC3",_[_.INT_VEC4=35669]="INT_VEC4",_[_.BOOL=35670]="BOOL",_[_.BOOL_VEC2=35671]="BOOL_VEC2",_[_.BOOL_VEC3=35672]="BOOL_VEC3",_[_.BOOL_VEC4=35673]="BOOL_VEC4",_[_.FLOAT_MAT2=35674]="FLOAT_MAT2",_[_.FLOAT_MAT3=35675]="FLOAT_MAT3",_[_.FLOAT_MAT4=35676]="FLOAT_MAT4",_[_.SAMPLER_2D=35678]="SAMPLER_2D",_[_.SAMPLER_CUBE=35680]="SAMPLER_CUBE",_[_.LOW_FLOAT=36336]="LOW_FLOAT",_[_.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",_[_.HIGH_FLOAT=36338]="HIGH_FLOAT",_[_.LOW_INT=36339]="LOW_INT",_[_.MEDIUM_INT=36340]="MEDIUM_INT",_[_.HIGH_INT=36341]="HIGH_INT",_[_.FRAMEBUFFER=36160]="FRAMEBUFFER",_[_.RENDERBUFFER=36161]="RENDERBUFFER",_[_.RGBA4=32854]="RGBA4",_[_.RGB5_A1=32855]="RGB5_A1",_[_.RGB565=36194]="RGB565",_[_.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",_[_.STENCIL_INDEX=6401]="STENCIL_INDEX",_[_.STENCIL_INDEX8=36168]="STENCIL_INDEX8",_[_.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_[_.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",_[_.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",_[_.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",_[_.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",_[_.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",_[_.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",_[_.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",_[_.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",_[_.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",_[_.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",_[_.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",_[_.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",_[_.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",_[_.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",_[_.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",_[_.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",_[_.NONE=0]="NONE",_[_.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",_[_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",_[_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",_[_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",_[_.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",_[_.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",_[_.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",_[_.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",_[_.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",_[_.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",_[_.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",_[_.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",_[_.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",_[_.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",_[_.READ_BUFFER=3074]="READ_BUFFER",_[_.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",_[_.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",_[_.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",_[_.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",_[_.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",_[_.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",_[_.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",_[_.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",_[_.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",_[_.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",_[_.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",_[_.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",_[_.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",_[_.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",_[_.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",_[_.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",_[_.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",_[_.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",_[_.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",_[_.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",_[_.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",_[_.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",_[_.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",_[_.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",_[_.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",_[_.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",_[_.RED=6403]="RED",_[_.RGB8=32849]="RGB8",_[_.RGBA8=32856]="RGBA8",_[_.RGB10_A2=32857]="RGB10_A2",_[_.TEXTURE_3D=32879]="TEXTURE_3D",_[_.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",_[_.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",_[_.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",_[_.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",_[_.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",_[_.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",_[_.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",_[_.SRGB=35904]="SRGB",_[_.SRGB8=35905]="SRGB8",_[_.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",_[_.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",_[_.RGBA32F=34836]="RGBA32F",_[_.RGB32F=34837]="RGB32F",_[_.RGBA16F=34842]="RGBA16F",_[_.RGB16F=34843]="RGB16F",_[_.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_[_.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",_[_.R11F_G11F_B10F=35898]="R11F_G11F_B10F",_[_.RGB9_E5=35901]="RGB9_E5",_[_.RGBA32UI=36208]="RGBA32UI",_[_.RGB32UI=36209]="RGB32UI",_[_.RGBA16UI=36214]="RGBA16UI",_[_.RGB16UI=36215]="RGB16UI",_[_.RGBA8UI=36220]="RGBA8UI",_[_.RGB8UI=36221]="RGB8UI",_[_.RGBA32I=36226]="RGBA32I",_[_.RGB32I=36227]="RGB32I",_[_.RGBA16I=36232]="RGBA16I",_[_.RGB16I=36233]="RGB16I",_[_.RGBA8I=36238]="RGBA8I",_[_.RGB8I=36239]="RGB8I",_[_.RED_INTEGER=36244]="RED_INTEGER",_[_.RGB_INTEGER=36248]="RGB_INTEGER",_[_.RGBA_INTEGER=36249]="RGBA_INTEGER",_[_.R8=33321]="R8",_[_.RG8=33323]="RG8",_[_.R16F=33325]="R16F",_[_.R32F=33326]="R32F",_[_.RG16F=33327]="RG16F",_[_.RG32F=33328]="RG32F",_[_.R8I=33329]="R8I",_[_.R8UI=33330]="R8UI",_[_.R16I=33331]="R16I",_[_.R16UI=33332]="R16UI",_[_.R32I=33333]="R32I",_[_.R32UI=33334]="R32UI",_[_.RG8I=33335]="RG8I",_[_.RG8UI=33336]="RG8UI",_[_.RG16I=33337]="RG16I",_[_.RG16UI=33338]="RG16UI",_[_.RG32I=33339]="RG32I",_[_.RG32UI=33340]="RG32UI",_[_.R8_SNORM=36756]="R8_SNORM",_[_.RG8_SNORM=36757]="RG8_SNORM",_[_.RGB8_SNORM=36758]="RGB8_SNORM",_[_.RGBA8_SNORM=36759]="RGBA8_SNORM",_[_.RGB10_A2UI=36975]="RGB10_A2UI",_[_.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",_[_.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",_[_.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",_[_.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",_[_.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",_[_.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",_[_.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",_[_.HALF_FLOAT=5131]="HALF_FLOAT",_[_.RG=33319]="RG",_[_.RG_INTEGER=33320]="RG_INTEGER",_[_.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",_[_.CURRENT_QUERY=34917]="CURRENT_QUERY",_[_.QUERY_RESULT=34918]="QUERY_RESULT",_[_.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",_[_.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",_[_.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",_[_.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",_[_.DRAW_BUFFER0=34853]="DRAW_BUFFER0",_[_.DRAW_BUFFER1=34854]="DRAW_BUFFER1",_[_.DRAW_BUFFER2=34855]="DRAW_BUFFER2",_[_.DRAW_BUFFER3=34856]="DRAW_BUFFER3",_[_.DRAW_BUFFER4=34857]="DRAW_BUFFER4",_[_.DRAW_BUFFER5=34858]="DRAW_BUFFER5",_[_.DRAW_BUFFER6=34859]="DRAW_BUFFER6",_[_.DRAW_BUFFER7=34860]="DRAW_BUFFER7",_[_.DRAW_BUFFER8=34861]="DRAW_BUFFER8",_[_.DRAW_BUFFER9=34862]="DRAW_BUFFER9",_[_.DRAW_BUFFER10=34863]="DRAW_BUFFER10",_[_.DRAW_BUFFER11=34864]="DRAW_BUFFER11",_[_.DRAW_BUFFER12=34865]="DRAW_BUFFER12",_[_.DRAW_BUFFER13=34866]="DRAW_BUFFER13",_[_.DRAW_BUFFER14=34867]="DRAW_BUFFER14",_[_.DRAW_BUFFER15=34868]="DRAW_BUFFER15",_[_.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",_[_.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",_[_.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",_[_.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",_[_.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",_[_.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",_[_.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",_[_.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",_[_.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",_[_.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",_[_.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",_[_.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",_[_.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",_[_.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",_[_.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",_[_.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",_[_.SAMPLER_3D=35679]="SAMPLER_3D",_[_.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",_[_.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",_[_.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",_[_.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",_[_.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",_[_.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",_[_.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",_[_.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",_[_.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",_[_.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",_[_.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",_[_.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",_[_.MAX_SAMPLES=36183]="MAX_SAMPLES",_[_.SAMPLER_BINDING=35097]="SAMPLER_BINDING",_[_.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",_[_.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",_[_.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",_[_.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",_[_.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",_[_.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",_[_.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",_[_.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",_[_.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",_[_.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",_[_.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",_[_.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",_[_.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",_[_.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",_[_.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",_[_.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",_[_.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",_[_.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",_[_.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",_[_.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",_[_.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",_[_.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",_[_.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",_[_.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",_[_.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",_[_.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",_[_.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",_[_.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",_[_.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",_[_.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",_[_.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",_[_.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",_[_.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",_[_.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",_[_.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",_[_.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",_[_.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",_[_.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",_[_.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",_[_.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",_[_.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",_[_.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",_[_.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",_[_.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",_[_.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",_[_.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",_[_.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",_[_.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",_[_.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",_[_.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",_[_.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",_[_.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",_[_.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",_[_.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",_[_.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",_[_.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",_[_.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",_[_.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",_[_.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",_[_.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",_[_.UNIFORM_TYPE=35383]="UNIFORM_TYPE",_[_.UNIFORM_SIZE=35384]="UNIFORM_SIZE",_[_.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",_[_.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",_[_.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",_[_.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",_[_.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",_[_.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",_[_.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",_[_.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",_[_.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",_[_.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",_[_.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",_[_.OBJECT_TYPE=37138]="OBJECT_TYPE",_[_.SYNC_CONDITION=37139]="SYNC_CONDITION",_[_.SYNC_STATUS=37140]="SYNC_STATUS",_[_.SYNC_FLAGS=37141]="SYNC_FLAGS",_[_.SYNC_FENCE=37142]="SYNC_FENCE",_[_.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",_[_.UNSIGNALED=37144]="UNSIGNALED",_[_.SIGNALED=37145]="SIGNALED",_[_.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",_[_.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",_[_.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",_[_.WAIT_FAILED=37149]="WAIT_FAILED",_[_.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",_[_.COLOR=6144]="COLOR",_[_.DEPTH=6145]="DEPTH",_[_.STENCIL=6146]="STENCIL",_[_.MIN=32775]="MIN",_[_.MAX=32776]="MAX",_[_.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",_[_.STREAM_READ=35041]="STREAM_READ",_[_.STREAM_COPY=35042]="STREAM_COPY",_[_.STATIC_READ=35045]="STATIC_READ",_[_.STATIC_COPY=35046]="STATIC_COPY",_[_.DYNAMIC_READ=35049]="DYNAMIC_READ",_[_.DYNAMIC_COPY=35050]="DYNAMIC_COPY",_[_.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",_[_.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",_[_.INVALID_INDEX=4294967295]="INVALID_INDEX",_[_.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",_[_.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",_[_.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",_[_.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",_[_.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",_[_.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",_[_.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",_[_.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",_[_.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",_[_.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",_[_.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",_[_.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",_[_.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",_[_.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",_[_.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",_[_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",_[_.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",_[_.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",_[_.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",_[_.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",_[_.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",_[_.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",_[_.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",_[_.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",_[_.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",_[_.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",_[_.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",_[_.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",_[_.RGBA32F_EXT=34836]="RGBA32F_EXT",_[_.RGB32F_EXT=34837]="RGB32F_EXT",_[_.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",_[_.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",_[_.MIN_EXT=32775]="MIN_EXT",_[_.MAX_EXT=32776]="MAX_EXT",_[_.SRGB_EXT=35904]="SRGB_EXT",_[_.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",_[_.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",_[_.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",_[_.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",_[_.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",_[_.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",_[_.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",_[_.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",_[_.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",_[_.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",_[_.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",_[_.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",_[_.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",_[_.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",_[_.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",_[_.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",_[_.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",_[_.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",_[_.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",_[_.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",_[_.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",_[_.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",_[_.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",_[_.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",_[_.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",_[_.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",_[_.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",_[_.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",_[_.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",_[_.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",_[_.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",_[_.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",_[_.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",_[_.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",_[_.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",_[_.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",_[_.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",_[_.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",_[_.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",_[_.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",_[_.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",_[_.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",_[_.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",_[_.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",_[_.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",_[_.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",(E=x||(x={}))[E.Buffer=0]="Buffer",E[E.Texture=1]="Texture",E[E.RenderTarget=2]="RenderTarget",E[E.Sampler=3]="Sampler",E[E.Program=4]="Program",E[E.Bindings=5]="Bindings",E[E.InputLayout=6]="InputLayout",E[E.RenderPipeline=7]="RenderPipeline",E[E.ComputePipeline=8]="ComputePipeline",E[E.Readback=9]="Readback",E[E.QueryPool=10]="QueryPool",E[E.RenderBundle=11]="RenderBundle",(u=X||(X={}))[u.NEVER=512]="NEVER",u[u.LESS=513]="LESS",u[u.EQUAL=514]="EQUAL",u[u.LEQUAL=515]="LEQUAL",u[u.GREATER=516]="GREATER",u[u.NOTEQUAL=517]="NOTEQUAL",u[u.GEQUAL=518]="GEQUAL",u[u.ALWAYS=519]="ALWAYS",(l=w||(w={}))[l.CCW=2305]="CCW",l[l.CW=2304]="CW",(R=W||(W={}))[R.NONE=0]="NONE",R[R.FRONT=1]="FRONT",R[R.BACK=2]="BACK",R[R.FRONT_AND_BACK=3]="FRONT_AND_BACK",(c=H||(H={}))[c.ZERO=0]="ZERO",c[c.ONE=1]="ONE",c[c.SRC=768]="SRC",c[c.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",c[c.DST=774]="DST",c[c.ONE_MINUS_DST=775]="ONE_MINUS_DST",c[c.SRC_ALPHA=770]="SRC_ALPHA",c[c.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",c[c.DST_ALPHA=772]="DST_ALPHA",c[c.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",c[c.CONST=32769]="CONST",c[c.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",c[c.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",(T=V||(V={}))[T.ADD=32774]="ADD",T[T.SUBSTRACT=32778]="SUBSTRACT",T[T.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",T[T.MIN=32775]="MIN",T[T.MAX=32776]="MAX",(A=k||(k={}))[A.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",A[A.REPEAT=1]="REPEAT",A[A.MIRRORED_REPEAT=2]="MIRRORED_REPEAT",(d=Y||(Y={}))[d.POINT=0]="POINT",d[d.BILINEAR=1]="BILINEAR",(f=K||(K={}))[f.NO_MIP=0]="NO_MIP",f[f.NEAREST=1]="NEAREST",f[f.LINEAR=2]="LINEAR",(p=Z||(Z={}))[p.POINTS=0]="POINTS",p[p.TRIANGLES=1]="TRIANGLES",p[p.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",p[p.LINES=3]="LINES",p[p.LINE_STRIP=4]="LINE_STRIP",(h=z||(z={}))[h.MAP_READ=1]="MAP_READ",h[h.MAP_WRITE=2]="MAP_WRITE",h[h.COPY_SRC=4]="COPY_SRC",h[h.COPY_DST=8]="COPY_DST",h[h.INDEX=16]="INDEX",h[h.VERTEX=32]="VERTEX",h[h.UNIFORM=64]="UNIFORM",h[h.STORAGE=128]="STORAGE",h[h.INDIRECT=256]="INDIRECT",h[h.QUERY_RESOLVE=512]="QUERY_RESOLVE",(S=q||(q={}))[S.STATIC=1]="STATIC",S[S.DYNAMIC=2]="DYNAMIC",(N=Q||(Q={}))[N.VERTEX=1]="VERTEX",N[N.INSTANCE=2]="INSTANCE",(j||(j={})).LOADED="loaded",(B=J||(J={}))[B.TEXTURE_2D=0]="TEXTURE_2D",B[B.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",B[B.TEXTURE_3D=2]="TEXTURE_3D",B[B.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP",(C=$||($={}))[C.SAMPLED=1]="SAMPLED",C[C.RENDER_TARGET=2]="RENDER_TARGET",C[C.STORAGE=4]="STORAGE",(F=ee||(ee={}))[F.NONE=0]="NONE",F[F.RED=1]="RED",F[F.GREEN=2]="GREEN",F[F.BLUE=4]="BLUE",F[F.ALPHA=8]="ALPHA",F[F.RGB=7]="RGB",F[F.ALL=15]="ALL",(g=et||(et={}))[g.KEEP=7680]="KEEP",g[g.ZERO=0]="ZERO",g[g.REPLACE=7681]="REPLACE",g[g.INVERT=5386]="INVERT",g[g.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",g[g.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",g[g.INCREMENT_WRAP=34055]="INCREMENT_WRAP",g[g.DECREMENT_WRAP=34056]="DECREMENT_WRAP",(O=er||(er={}))[O.Float=0]="Float",O[O.UnfilterableFloat=1]="UnfilterableFloat",O[O.Uint=2]="Uint",O[O.Sint=3]="Sint",O[O.Depth=4]="Depth",(m=en||(en={}))[m.LOWER_LEFT=0]="LOWER_LEFT",m[m.UPPER_LEFT=1]="UPPER_LEFT",(I=ei||(ei={}))[I.NEGATIVE_ONE=0]="NEGATIVE_ONE",I[I.ZERO=1]="ZERO",(M=ea||(ea={}))[M.OcclusionConservative=0]="OcclusionConservative",(U=eo||(eo={}))[U.U8=1]="U8",U[U.U16=2]="U16",U[U.U32=3]="U32",U[U.S8=4]="S8",U[U.S16=5]="S16",U[U.S32=6]="S32",U[U.F16=7]="F16",U[U.F32=8]="F32",U[U.BC1=65]="BC1",U[U.BC2=66]="BC2",U[U.BC3=67]="BC3",U[U.BC4_UNORM=68]="BC4_UNORM",U[U.BC4_SNORM=69]="BC4_SNORM",U[U.BC5_UNORM=70]="BC5_UNORM",U[U.BC5_SNORM=71]="BC5_SNORM",U[U.U16_PACKED_5551=97]="U16_PACKED_5551",U[U.U16_PACKED_565=98]="U16_PACKED_565",U[U.D24=129]="D24",U[U.D32F=130]="D32F",U[U.D24S8=131]="D24S8",U[U.D32FS8=132]="D32FS8",(L=es||(es={}))[L.R=1]="R",L[L.RG=2]="RG",L[L.RGB=3]="RGB",L[L.RGBA=4]="RGBA",L[L.A=5]="A",(D=e_||(e_={}))[D.None=0]="None",D[D.Normalized=1]="Normalized",D[D.sRGB=2]="sRGB",D[D.Depth=4]="Depth",D[D.Stencil=8]="Stencil",D[D.RenderTarget=16]="RenderTarget",D[D.Luminance=32]="Luminance",(P=eE||(eE={}))[P.ALPHA=eS(eo.U8,es.A,e_.None)]="ALPHA",P[P.U8_LUMINANCE=eS(eo.U8,es.A,e_.Luminance)]="U8_LUMINANCE",P[P.F16_LUMINANCE=eS(eo.F16,es.A,e_.Luminance)]="F16_LUMINANCE",P[P.F32_LUMINANCE=eS(eo.F32,es.A,e_.Luminance)]="F32_LUMINANCE",P[P.F16_R=eS(eo.F16,es.R,e_.None)]="F16_R",P[P.F16_RG=eS(eo.F16,es.RG,e_.None)]="F16_RG",P[P.F16_RGB=eS(eo.F16,es.RGB,e_.None)]="F16_RGB",P[P.F16_RGBA=eS(eo.F16,es.RGBA,e_.None)]="F16_RGBA",P[P.F32_R=eS(eo.F32,es.R,e_.None)]="F32_R",P[P.F32_RG=eS(eo.F32,es.RG,e_.None)]="F32_RG",P[P.F32_RGB=eS(eo.F32,es.RGB,e_.None)]="F32_RGB",P[P.F32_RGBA=eS(eo.F32,es.RGBA,e_.None)]="F32_RGBA",P[P.U8_R=eS(eo.U8,es.R,e_.None)]="U8_R",P[P.U8_R_NORM=eS(eo.U8,es.R,e_.Normalized)]="U8_R_NORM",P[P.U8_RG=eS(eo.U8,es.RG,e_.None)]="U8_RG",P[P.U8_RG_NORM=eS(eo.U8,es.RG,e_.Normalized)]="U8_RG_NORM",P[P.U8_RGB=eS(eo.U8,es.RGB,e_.None)]="U8_RGB",P[P.U8_RGB_NORM=eS(eo.U8,es.RGB,e_.Normalized)]="U8_RGB_NORM",P[P.U8_RGB_SRGB=eS(eo.U8,es.RGB,e_.sRGB|e_.Normalized)]="U8_RGB_SRGB",P[P.U8_RGBA=eS(eo.U8,es.RGBA,e_.None)]="U8_RGBA",P[P.U8_RGBA_NORM=eS(eo.U8,es.RGBA,e_.Normalized)]="U8_RGBA_NORM",P[P.U8_RGBA_SRGB=eS(eo.U8,es.RGBA,e_.sRGB|e_.Normalized)]="U8_RGBA_SRGB",P[P.U16_R=eS(eo.U16,es.R,e_.None)]="U16_R",P[P.U16_R_NORM=eS(eo.U16,es.R,e_.Normalized)]="U16_R_NORM",P[P.U16_RG_NORM=eS(eo.U16,es.RG,e_.Normalized)]="U16_RG_NORM",P[P.U16_RGBA_NORM=eS(eo.U16,es.RGBA,e_.Normalized)]="U16_RGBA_NORM",P[P.U16_RGBA=eS(eo.U16,es.RGBA,e_.None)]="U16_RGBA",P[P.U16_RGB=eS(eo.U16,es.RGB,e_.None)]="U16_RGB",P[P.U16_RG=eS(eo.U16,es.RG,e_.None)]="U16_RG",P[P.U32_R=eS(eo.U32,es.R,e_.None)]="U32_R",P[P.U32_RG=eS(eo.U32,es.RG,e_.None)]="U32_RG",P[P.U32_RGB=eS(eo.U32,es.RGB,e_.None)]="U32_RGB",P[P.U32_RGBA=eS(eo.U32,es.RGBA,e_.None)]="U32_RGBA",P[P.S8_R=eS(eo.S8,es.R,e_.None)]="S8_R",P[P.S8_R_NORM=eS(eo.S8,es.R,e_.Normalized)]="S8_R_NORM",P[P.S8_RG_NORM=eS(eo.S8,es.RG,e_.Normalized)]="S8_RG_NORM",P[P.S8_RGB_NORM=eS(eo.S8,es.RGB,e_.Normalized)]="S8_RGB_NORM",P[P.S8_RGBA_NORM=eS(eo.S8,es.RGBA,e_.Normalized)]="S8_RGBA_NORM",P[P.S16_R=eS(eo.S16,es.R,e_.None)]="S16_R",P[P.S16_RG=eS(eo.S16,es.RG,e_.None)]="S16_RG",P[P.S16_RG_NORM=eS(eo.S16,es.RG,e_.Normalized)]="S16_RG_NORM",P[P.S16_RGB_NORM=eS(eo.S16,es.RGB,e_.Normalized)]="S16_RGB_NORM",P[P.S16_RGBA=eS(eo.S16,es.RGBA,e_.None)]="S16_RGBA",P[P.S16_RGBA_NORM=eS(eo.S16,es.RGBA,e_.Normalized)]="S16_RGBA_NORM",P[P.S32_R=eS(eo.S32,es.R,e_.None)]="S32_R",P[P.S32_RG=eS(eo.S32,es.RG,e_.None)]="S32_RG",P[P.S32_RGB=eS(eo.S32,es.RGB,e_.None)]="S32_RGB",P[P.S32_RGBA=eS(eo.S32,es.RGBA,e_.None)]="S32_RGBA",P[P.U16_RGBA_5551=eS(eo.U16_PACKED_5551,es.RGBA,e_.Normalized)]="U16_RGBA_5551",P[P.U16_RGB_565=eS(eo.U16_PACKED_565,es.RGB,e_.Normalized)]="U16_RGB_565",P[P.BC1=eS(eo.BC1,es.RGBA,e_.Normalized)]="BC1",P[P.BC1_SRGB=eS(eo.BC1,es.RGBA,e_.Normalized|e_.sRGB)]="BC1_SRGB",P[P.BC2=eS(eo.BC2,es.RGBA,e_.Normalized)]="BC2",P[P.BC2_SRGB=eS(eo.BC2,es.RGBA,e_.Normalized|e_.sRGB)]="BC2_SRGB",P[P.BC3=eS(eo.BC3,es.RGBA,e_.Normalized)]="BC3",P[P.BC3_SRGB=eS(eo.BC3,es.RGBA,e_.Normalized|e_.sRGB)]="BC3_SRGB",P[P.BC4_UNORM=eS(eo.BC4_UNORM,es.R,e_.Normalized)]="BC4_UNORM",P[P.BC4_SNORM=eS(eo.BC4_SNORM,es.R,e_.Normalized)]="BC4_SNORM",P[P.BC5_UNORM=eS(eo.BC5_UNORM,es.RG,e_.Normalized)]="BC5_UNORM",P[P.BC5_SNORM=eS(eo.BC5_SNORM,es.RG,e_.Normalized)]="BC5_SNORM",P[P.D24=eS(eo.D24,es.R,e_.Depth)]="D24",P[P.D24_S8=eS(eo.D24S8,es.RG,e_.Depth|e_.Stencil)]="D24_S8",P[P.D32F=eS(eo.D32F,es.R,e_.Depth)]="D32F",P[P.D32F_S8=eS(eo.D32FS8,es.RG,e_.Depth|e_.Stencil)]="D32F_S8",P[P.U8_RGB_RT=eS(eo.U8,es.RGB,e_.RenderTarget|e_.Normalized)]="U8_RGB_RT",P[P.U8_RGBA_RT=eS(eo.U8,es.RGBA,e_.RenderTarget|e_.Normalized)]="U8_RGBA_RT",P[P.U8_RGBA_RT_SRGB=eS(eo.U8,es.RGBA,e_.RenderTarget|e_.Normalized|e_.sRGB)]="U8_RGBA_RT_SRGB";var eL=eU(0,0,0,0);eU(0,0,0,1);var eD=eU(1,1,1,0);function eP(e){return!!(e&&(e&e-1)==0)}function ev(e,t){return null!=e?e:t}function eG(e,t){var r=t-1;return e+r&~r}function eb(e,t){e.blendDstFactor=t.blendDstFactor,e.blendSrcFactor=t.blendSrcFactor,e.blendMode=t.blendMode}function ey(e,t){return void 0===e&&(e={}),e.compare=t.compare,e.depthFailOp=t.depthFailOp,e.passOp=t.passOp,e.failOp=t.failOp,e.mask=t.mask,e}function ex(e,t){return void 0===e&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),eb(e.rgbBlendState,t.rgbBlendState),eb(e.alphaBlendState,t.alphaBlendState),e.channelWriteMask=t.channelWriteMask,e}function eX(e,t){e.length!==t.length&&(e.length=t.length);for(var r=0;r<t.length;r++)e[r]=ex(e[r],t[r])}function ew(e){var t=Object.assign({},e);return t.attachmentsState=[],eX(t.attachmentsState,e.attachmentsState),t.blendConstant=t.blendConstant&&eM(t.blendConstant),t.stencilFront=ey(void 0,e.stencilFront),t.stencilBack=ey(void 0,e.stencilBack),t}eU(1,1,1,1);var eW={blendMode:V.ADD,blendSrcFactor:H.ONE,blendDstFactor:H.ZERO},eH={attachmentsState:[{channelWriteMask:ee.ALL,rgbBlendState:eW,alphaBlendState:eW}],blendConstant:eM(eL),depthWrite:!0,depthCompare:X.LEQUAL,stencilWrite:!1,stencilFront:{compare:X.ALWAYS,passOp:et.KEEP,depthFailOp:et.KEEP,failOp:et.KEEP},stencilBack:{compare:X.ALWAYS,passOp:et.KEEP,depthFailOp:et.KEEP,failOp:et.KEEP},cullMode:W.NONE,frontFace:w.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};i={depthCompare:X.ALWAYS,depthWrite:!1},void 0===i&&(i=null),void 0===(a=eH)&&(a=eH),s=ew(a),null!==i&&(void 0!==(o=i).attachmentsState&&eX(s.attachmentsState,o.attachmentsState),s.blendConstant&&o.blendConstant&&eI(s.blendConstant,o.blendConstant),s.depthCompare=ev(o.depthCompare,s.depthCompare),s.depthWrite=ev(o.depthWrite,s.depthWrite),s.stencilWrite=ev(o.stencilWrite,s.stencilWrite),s.stencilFront&&o.stencilFront&&ey(s.stencilFront,o.stencilFront),s.stencilBack&&o.stencilBack&&ey(s.stencilBack,o.stencilBack),s.cullMode=ev(o.cullMode,s.cullMode),s.frontFace=ev(o.frontFace,s.frontFace),s.polygonOffset=ev(o.polygonOffset,s.polygonOffset),s.polygonOffsetFactor=ev(o.polygonOffsetFactor,s.polygonOffsetFactor),s.polygonOffsetUnits=ev(o.polygonOffsetUnits,s.polygonOffsetUnits));var eV={texture:null,sampler:null,formatKind:er.Float,dimension:J.TEXTURE_2D};function ek(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function eY(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n]);return r}function eK(e,t){return e.texture===t.texture&&e.binding===t.binding}function eZ(e,t){return e.buffer===t.buffer&&e.size===t.size&&e.binding===t.binding&&e.offset===t.offset}function ez(e,t){return null===e?null===t:null!==t&&e.sampler===t.sampler&&e.texture===t.texture&&e.dimension===t.dimension&&e.formatKind===t.formatKind&&e.comparison===t.comparison}function eq(e,t){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],!!(e.samplerBindings.length===t.samplerBindings.length&&ek(e.samplerBindings,t.samplerBindings,ez)&&ek(e.uniformBufferBindings,t.uniformBufferBindings,eZ)&&ek(e.storageBufferBindings,t.storageBufferBindings,eZ)&&ek(e.storageTextureBindings,t.storageTextureBindings,eK))}function eQ(e,t){return e.blendMode==t.blendMode&&e.blendSrcFactor===t.blendSrcFactor&&e.blendDstFactor===t.blendDstFactor}function ej(e,t){return!!(eQ(e.rgbBlendState,t.rgbBlendState)&&eQ(e.alphaBlendState,t.alphaBlendState))&&e.channelWriteMask===t.channelWriteMask}function eJ(e,t){return e.compare==t.compare&&e.depthFailOp===t.depthFailOp&&e.failOp===t.failOp&&e.passOp===t.passOp&&e.mask===t.mask}function e$(e,t){return e===t}function e3(e,t){var r,n,i,a;return e.topology===t.topology&&e.inputLayout===t.inputLayout&&e.sampleCount===t.sampleCount&&(!e.megaStateDescriptor||!t.megaStateDescriptor||(r=e.megaStateDescriptor,n=t.megaStateDescriptor,!!(ek(r.attachmentsState,n.attachmentsState,ej)&&(!r.blendConstant||!n.blendConstant||em(r.blendConstant,n.blendConstant))&&(!r.stencilFront||!n.stencilFront||eJ(r.stencilFront,n.stencilFront))&&(!r.stencilBack||!n.stencilBack||eJ(r.stencilBack,n.stencilBack)))&&r.depthCompare===n.depthCompare&&r.depthWrite===n.depthWrite&&r.stencilWrite===n.stencilWrite&&r.cullMode===n.cullMode&&r.frontFace===n.frontFace&&r.polygonOffset===n.polygonOffset&&r.polygonOffsetFactor===n.polygonOffsetFactor&&r.polygonOffsetUnits===n.polygonOffsetUnits))&&(i=e.program,a=t.program,!!(i.id===a.id&&ek(e.colorAttachmentFormats,t.colorAttachmentFormats,e$))&&e.depthStencilAttachmentFormat===t.depthStencilAttachmentFormat)}function e0(e,t){return e.offset===t.offset&&e.shaderLocation===t.shaderLocation&&e.format===t.format&&e.divisor===t.divisor}function e1(e,t){return(0,eA.Z)(e)?(0,eA.Z)(t):!(0,eA.Z)(t)&&e.arrayStride===t.arrayStride&&e.stepMode===t.stepMode&&ek(e.attributes,t.attributes,e0)}function e2(e,t){var r,n;return!!(e.indexBufferFormat===t.indexBufferFormat&&ek(e.vertexBufferDescriptors,t.vertexBufferDescriptors,e1))&&(r=e.program,n=t.program,r.id===n.id)}function e6(e){return{sampler:e.sampler,texture:e.texture,dimension:e.dimension,formatKind:e.formatKind,comparison:e.comparison}}function e8(e){var t=e.buffer,r=e.size;return{binding:e.binding,buffer:t,offset:e.offset,size:r}}function e4(e){return{binding:e.binding,texture:e.texture}}function e5(e){return{samplerBindings:e.samplerBindings&&eY(e.samplerBindings,e6),uniformBufferBindings:e.uniformBufferBindings&&eY(e.uniformBufferBindings,e8),storageBufferBindings:e.storageBufferBindings&&eY(e.storageBufferBindings,e8),storageTextureBindings:e.storageTextureBindings&&eY(e.storageTextureBindings,e4),pipeline:e.pipeline}}function e7(e){var t=e.inputLayout,r=e.program,n=e.topology;return{inputLayout:t,megaStateDescriptor:e.megaStateDescriptor&&ew(e.megaStateDescriptor),program:r,topology:n,colorAttachmentFormats:e.colorAttachmentFormats.slice(),depthStencilAttachmentFormat:e.depthStencilAttachmentFormat,sampleCount:e.sampleCount}}function e9(e){return{shaderLocation:e.shaderLocation,format:e.format,offset:e.offset,divisor:e.divisor}}function te(e){return(0,eA.Z)(e)?e:{arrayStride:e.arrayStride,stepMode:e.stepMode,attributes:eY(e.attributes,e9)}}function tt(e){return{vertexBufferDescriptors:eY(e.vertexBufferDescriptors,te),indexBufferFormat:e.indexBufferFormat,program:e.program}}var tr=/([^[]*)(\[[0-9]+\])?/;function tn(){var e=null;return function(t,r,n){var i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function ti(e,t,r,n){var i=null,a=null;return function(o,s,_){var E=t(_,r),u=E.length,l=!1;if(null===i)i=new Float32Array(u),a=u,l=!0;else{eg(a===u,"Uniform length cannot change.");for(var R=0;R<u;++R)if(E[R]!==i[R]){l=!0;break}}return l&&(n(o,e,s,E),i.set(E)),l}}function ta(e,t,r,n){e[t](r,n)}function to(e,t,r,n){e[t](r,!1,n)}var ts={},t_={},tE={},tu=[0];function tl(e,t,r,n){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(tu[0]=e,e=tu);var i=e.length;if(e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function tR(e,t){return tl(e,t,Float32Array,ts)}function tc(e,t){return tl(e,t,Int32Array,t_)}function tT(e,t){return tl(e,t,Uint32Array,tE)}var tA=((eu={})[y.FLOAT]=ti.bind(null,"uniform1fv",tR,1,ta),eu[y.FLOAT_VEC2]=ti.bind(null,"uniform2fv",tR,2,ta),eu[y.FLOAT_VEC3]=ti.bind(null,"uniform3fv",tR,3,ta),eu[y.FLOAT_VEC4]=ti.bind(null,"uniform4fv",tR,4,ta),eu[y.INT]=ti.bind(null,"uniform1iv",tc,1,ta),eu[y.INT_VEC2]=ti.bind(null,"uniform2iv",tc,2,ta),eu[y.INT_VEC3]=ti.bind(null,"uniform3iv",tc,3,ta),eu[y.INT_VEC4]=ti.bind(null,"uniform4iv",tc,4,ta),eu[y.BOOL]=ti.bind(null,"uniform1iv",tc,1,ta),eu[y.BOOL_VEC2]=ti.bind(null,"uniform2iv",tc,2,ta),eu[y.BOOL_VEC3]=ti.bind(null,"uniform3iv",tc,3,ta),eu[y.BOOL_VEC4]=ti.bind(null,"uniform4iv",tc,4,ta),eu[y.FLOAT_MAT2]=ti.bind(null,"uniformMatrix2fv",tR,4,to),eu[y.FLOAT_MAT3]=ti.bind(null,"uniformMatrix3fv",tR,9,to),eu[y.FLOAT_MAT4]=ti.bind(null,"uniformMatrix4fv",tR,16,to),eu[y.UNSIGNED_INT]=ti.bind(null,"uniform1uiv",tT,1,ta),eu[y.UNSIGNED_INT_VEC2]=ti.bind(null,"uniform2uiv",tT,2,ta),eu[y.UNSIGNED_INT_VEC3]=ti.bind(null,"uniform3uiv",tT,3,ta),eu[y.UNSIGNED_INT_VEC4]=ti.bind(null,"uniform4uiv",tT,4,ta),eu[y.FLOAT_MAT2x3]=ti.bind(null,"uniformMatrix2x3fv",tR,6,to),eu[y.FLOAT_MAT2x4]=ti.bind(null,"uniformMatrix2x4fv",tR,8,to),eu[y.FLOAT_MAT3x2]=ti.bind(null,"uniformMatrix3x2fv",tR,6,to),eu[y.FLOAT_MAT3x4]=ti.bind(null,"uniformMatrix3x4fv",tR,12,to),eu[y.FLOAT_MAT4x2]=ti.bind(null,"uniformMatrix4x2fv",tR,8,to),eu[y.FLOAT_MAT4x3]=ti.bind(null,"uniformMatrix4x3fv",tR,12,to),eu[y.SAMPLER_2D]=tn,eu[y.SAMPLER_CUBE]=tn,eu[y.SAMPLER_3D]=tn,eu[y.SAMPLER_2D_SHADOW]=tn,eu[y.SAMPLER_2D_ARRAY]=tn,eu[y.SAMPLER_2D_ARRAY_SHADOW]=tn,eu[y.SAMPLER_CUBE_SHADOW]=tn,eu[y.INT_SAMPLER_2D]=tn,eu[y.INT_SAMPLER_3D]=tn,eu[y.INT_SAMPLER_CUBE]=tn,eu[y.INT_SAMPLER_2D_ARRAY]=tn,eu[y.UNSIGNED_INT_SAMPLER_2D]=tn,eu[y.UNSIGNED_INT_SAMPLER_3D]=tn,eu[y.UNSIGNED_INT_SAMPLER_CUBE]=tn,eu[y.UNSIGNED_INT_SAMPLER_2D_ARRAY]=tn,eu);function td(e,t,r){var n=tA[r.type];if(!n)throw Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}var tf={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function tp(e,t){return"#define ".concat(e," ").concat(t)}function th(e){if(void 0===e)return null;var t=/binding\s*=\s*(\d+)/.exec(e);if(null!==t){var r=parseInt(t[1],10);if(!Number.isNaN(r))return r}return null}function tS(e,t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=!0);var a="#version 100"===e.glslVersion,o="frag"===t&&(null===(p=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))||void 0===p?void 0:p.length)>1,s=r.replace("\r\n","\n").split("\n").map(function(e){return e.replace(/[/][/].*$/,"")}).filter(function(e){return!(!e||/^\s+$/.test(e))}),_="";null!==n&&(_=Object.keys(n).map(function(e){return tp(e,n[e])}).join("\n"));var E=s.find(function(e){return e.startsWith("precision")})||"precision mediump float;",u=i?s.filter(function(e){return!e.startsWith("precision")}).join("\n"):s.join("\n"),l="";if(e.viewportOrigin===en.UPPER_LEFT&&(l+="".concat(tp("VIEWPORT_ORIGIN_TL","1"),"\n")),e.clipSpaceNearZ===ei.ZERO&&(l+="".concat(tp("CLIPSPACE_NEAR_ZERO","1"),"\n")),e.explicitBindingLocations){var R=0,c=0,T=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(e,t,r,n){return"layout(".concat(r?"".concat(r,", "):"","set = ").concat(R,", binding = ").concat(c++,") uniform ").concat(n)}),R++,c=0,eg(e.separateSamplerTextures),u=(u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(e,r,n,i,a){var o=th(n);null===o&&(o=c++);var s=(0,ep.CR)([i,""],2),_=s[0],E=s[1];return"frag"===t?"\nlayout(set = ".concat(R,", binding = ").concat(2*o+0,") uniform texture").concat(_," T_").concat(a,";\nlayout(set = ").concat(R,", binding = ").concat(2*o+1,") uniform sampler").concat(E," S_").concat(a,";").trim():""})).replace("frag"===t?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(e,t){return"layout(location = ".concat(T++,") ").concat(t)}),l+="".concat(tp("gl_VertexID","gl_VertexIndex"),"\n")+"".concat(tp("gl_InstanceID","gl_InstanceIndex"),"\n"),E=E.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var A=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(e,t,r,n,i){var a=th(r);return null===a&&(a=A++),"uniform sampler".concat(n," ").concat(i,"; // BINDING=").concat(a)})}if(u=(u=(u=u.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"SAMPLER_".concat(t,"(P_").concat(r,")")})).replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"PP_SAMPLER_".concat(t,"(P_").concat(r,")")})).replace(/\bPU_TEXTURE\((.*?)\)/g,function(e,t){return"TEXTURE(P_".concat(t,")")}),e.separateSamplerTextures)u=(u=(u=(u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){var n=(0,ep.CR)([t,""],2),i=n[0],a=n[1];return"texture".concat(i," T_P_").concat(r,", sampler").concat(a," S_P_").concat(r)})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"T_".concat(r,", S_").concat(r)})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"sampler".concat(t,"(T_").concat(r,", S_").concat(r,")")})).replace(/\bTEXTURE\((.*?)\)/g,function(e,t){return"T_".concat(t)});else{var d=[];u=(u=(u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"sampler".concat(t," P_").concat(r)})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return r})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return d.push([r,t]),r}),a&&d.forEach(function(e){var t=(0,ep.CR)(e,2),r=t[0],n=t[1];u=u.replace(RegExp("texture\\(".concat(r),"g"),function(){return"texture".concat(n,"(").concat(r)})}),u=u.replace(/\bTEXTURE\((.*?)\)/g,function(e,t){return t})}var f="".concat(a?"":e.glslVersion,"\n").concat(a&&o?"#extension GL_EXT_draw_buffers : require\n":"","\n").concat(a&&"frag"===t?"#extension GL_OES_standard_derivatives : enable\n":"").concat(i?E:"","\n").concat(l||"").concat(_?_+"\n":"","\n").concat(u,"\n").trim();if(e.explicitBindingLocations&&"frag"===t&&(f=f.replace(/^\b(out)\b/g,function(e,t){return"layout(location = 0) ".concat(t)})),a){if("frag"===t&&(f=f.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"varying ".concat(t," ").concat(r,";\n")})),"vert"===t&&(f=(f=f.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"varying ".concat(t," ").concat(r,";\n")})).replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"attribute ".concat(t," ").concat(r,";\n")})),f=f.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(e,t){return t.trim().replace(/^.*$/gm,function(e){var t=e.trim();return t.startsWith("#")?t:e?"uniform ".concat(t):""})}),"frag"===t){if(o){var p,h,S=[],N=(f=f.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(e,t){return S.push(t),"vec4 ".concat(t,";\n")})).lastIndexOf("}");f=f.substring(0,N)+"\n    ".concat(S.map(function(e,t){return"gl_FragData[".concat(t,"] = ").concat(e,";\n    ")}).join("\n"))+f.substring(N)}else if(f=f.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(e,t,r){return h=r,"".concat(t," ").concat(r,";\n")}),h){var N=f.lastIndexOf("}");f=f.substring(0,N)+"\n  gl_FragColor = vec4(".concat(h,");\n")+f.substring(N)}}f=f.replace(/^\s*layout\((.*)\)/gm,"")}return f}var tN=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this)||this;return i.id=r,i.device=n,null!==i.device.resourceCreationTracker&&i.device.resourceCreationTracker.trackResourceCreated(i),i}return(0,ep.ZT)(t,e),t.prototype.destroy=function(){null!==this.device.resourceCreationTracker&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},t}(eh.Z),tB=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;a.type=x.Bindings;var o=i.uniformBufferBindings,s=i.samplerBindings;return a.uniformBufferBindings=o||[],a.samplerBindings=s||[],a.bindingLayouts=a.createBindingLayouts(),a}return(0,ep.ZT)(t,e),t.prototype.createBindingLayouts=function(){var e=0,t=0,r=[],n=this.uniformBufferBindings.length,i=this.samplerBindings.length;return r.push({firstUniformBuffer:e,numUniformBuffers:n,firstSampler:t,numSamplers:i}),{numUniformBuffers:e+=n,numSamplers:t+=i,bindingLayoutTables:r}},t}(tN);function tC(e){return void 0!==el?el:"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?(el=!0,!0):el=!!(e&&2===e._version)}function tF(e){switch(eB(e)){case eo.BC1:case eo.BC2:case eo.BC3:case eo.BC4_UNORM:case eo.BC4_SNORM:case eo.BC5_UNORM:case eo.BC5_SNORM:return!0;default:return!1}}function tg(e){if(255&e&e_.Normalized)return!1;var t=eB(e);return t===eo.S8||t===eo.S16||t===eo.S32||t===eo.U8||t===eo.U16||t===eo.U32}function tO(e){return e&z.INDEX?y.ELEMENT_ARRAY_BUFFER:e&z.VERTEX?y.ARRAY_BUFFER:e&z.UNIFORM?y.UNIFORM_BUFFER:void 0}function tm(e){switch(e){case k.CLAMP_TO_EDGE:return y.CLAMP_TO_EDGE;case k.REPEAT:return y.REPEAT;case k.MIRRORED_REPEAT:return y.MIRRORED_REPEAT;default:throw Error("whoops")}}function tI(e,t){if(t===K.LINEAR&&e===Y.BILINEAR)return y.LINEAR_MIPMAP_LINEAR;if(t===K.LINEAR&&e===Y.POINT)return y.NEAREST_MIPMAP_LINEAR;if(t===K.NEAREST&&e===Y.BILINEAR)return y.LINEAR_MIPMAP_NEAREST;if(t===K.NEAREST&&e===Y.POINT)return y.NEAREST_MIPMAP_NEAREST;if(t===K.NO_MIP&&e===Y.BILINEAR)return y.LINEAR;if(t===K.NO_MIP&&e===Y.POINT)return y.NEAREST;throw Error("Unknown texture filter mode")}function tM(e,t){return void 0===t&&(t=0),e.gl_buffer_pages[t/e.pageByteSize|0]}function tU(e){return e.gl_texture}function tL(e){return e.gl_sampler}function tD(e,t){e.name=t,e.__SPECTOR_Metadata={name:t}}function tP(e,t){for(var r=[];;){var n=t.exec(e);if(!n)break;r.push(n)}return r}function tv(e){return e.blendMode==V.ADD&&e.blendSrcFactor==H.ONE&&e.blendDstFactor===H.ZERO}var tG=function(e){function t(t){var r,n=t.id,i=t.device,a=t.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=x.Buffer;var s=a.viewOrSize,_=a.usage,E=a.hint,u=void 0===E?q.STATIC:E,l=i.uniformBufferMaxPageByteSize,R=i.gl,c=_&z.UNIFORM;c||(tC(R)?R.bindVertexArray(null):i.OES_vertex_array_object.bindVertexArrayOES(null));var T=(0,ed.Z)(s)?eG(s,4):eG(s.byteLength,4);if(o.gl_buffer_pages=[],c){for(var A=T;A>0;)o.gl_buffer_pages.push(o.createBufferPage(Math.min(A,l),_,u)),A-=l;r=l}else o.gl_buffer_pages.push(o.createBufferPage(T,_,u)),r=T;return o.pageByteSize=r,o.byteSize=T,o.usage=_,o.gl_target=tO(_),(0,ed.Z)(s)||o.setSubData(0,new Uint8Array(s.buffer)),c||(tC(R)?R.bindVertexArray(o.device.currentBoundVAO):i.OES_vertex_array_object.bindVertexArrayOES(o.device.currentBoundVAO)),o}return(0,ep.ZT)(t,e),t.prototype.setSubData=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.byteLength-r);for(var i=this.device.gl,a=this.pageByteSize,o=e+n,s=e,_=e%a;s<o;){var E=tC(i)?i.COPY_WRITE_BUFFER:this.gl_target,u=tM(this,s);if(u.ubo)return;i.bindBuffer(E,u),tC(i)?i.bufferSubData(E,_,t,r,Math.min(o-s,a)):i.bufferSubData(E,_,t),s+=a,_=0,r+=a,this.device.debugGroupStatisticsBufferUpload()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.gl_buffer_pages.length;t++)this.gl_buffer_pages[t].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[t]);this.gl_buffer_pages=[]},t.prototype.createBufferPage=function(e,t,r){var n=this.device.gl,i=t&z.UNIFORM;if(!tC(n)&&i)return{ubo:!0};var a=this.device.ensureResourceExists(n.createBuffer()),o=tO(t),s=function(e){switch(e){case q.STATIC:return y.STATIC_DRAW;case q.DYNAMIC:return y.DYNAMIC_DRAW}}(r);return n.bindBuffer(o,a),n.bufferData(o,e,s),a},t}(tN),tb=function(e){function t(t){var r,n,i,a,o,s=t.id,_=t.device,E=t.descriptor,u=e.call(this,{id:s,device:_})||this;u.type=x.InputLayout;var l=E.vertexBufferDescriptors,R=E.indexBufferFormat,c=E.program;eg(R===eE.U16_R||R===eE.U32_R||null===R);var T=null!==R?function(e){switch(e){case eE.U8_R:return y.UNSIGNED_BYTE;case eE.U16_R:return y.UNSIGNED_SHORT;case eE.U32_R:return y.UNSIGNED_INT;default:throw Error("whoops")}}(R):null,A=null!==R?eC(eB(R)):null,d=u.device.gl,f=u.device.ensureResourceExists(tC(d)?d.createVertexArray():_.OES_vertex_array_object.createVertexArrayOES());tC(d)?d.bindVertexArray(f):_.OES_vertex_array_object.bindVertexArrayOES(f),d.bindBuffer(d.ARRAY_BUFFER,tM(u.device.fallbackVertexBuffer));try{for(var p=(0,ep.XA)(E.vertexBufferDescriptors),h=p.next();!h.done;h=p.next()){var S=h.value,N=S.stepMode,B=S.attributes;try{for(var C=(i=void 0,(0,ep.XA)(B)),F=C.next();!F.done;F=C.next()){var g=F.value,O=g.shaderLocation,m=g.format,I=g.divisor,M=void 0===I?1:I,U=tC(d)?O:null===(o=c.attributes[O])||void 0===o?void 0:o.location,L=function(e){var t=eB(e),r=eN(e),n=255&e,i=function(e){switch(e){case eo.U8:return y.UNSIGNED_BYTE;case eo.U16:return y.UNSIGNED_SHORT;case eo.U32:return y.UNSIGNED_INT;case eo.S8:return y.BYTE;case eo.S16:return y.SHORT;case eo.S32:return y.INT;case eo.F16:return y.HALF_FLOAT;case eo.F32:return y.FLOAT;default:throw Error("whoops")}}(t);return{size:function(e){switch(e){case es.R:return 1;case es.RG:return 2;case es.RGB:return 3;case es.RGBA:return 4;default:return 1}}(r),type:i,normalized:!!(n&e_.Normalized)}}(m);if(g.vertexFormat=L,!(0,eA.Z)(U)){tg(m);var D=L.size,P=L.type,v=L.normalized;d.vertexAttribPointer(U,D,P,v,0,0),N===Q.INSTANCE&&(tC(d)?d.vertexAttribDivisor(U,M):_.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(U,M)),d.enableVertexAttribArray(U)}}}catch(e){i={error:e}}finally{try{F&&!F.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return tC(d)?d.bindVertexArray(null):_.OES_vertex_array_object.bindVertexArrayOES(null),u.vertexBufferDescriptors=l,u.vao=f,u.indexBufferFormat=R,u.indexBufferType=T,u.indexBufferCompByteSize=A,u.program=c,u}return(0,ep.ZT)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(tC(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},t}(tN),ty=function(e){function t(t){var r,n,i=t.id,a=t.device,o=t.descriptor,s=t.fake,_=e.call(this,{id:i,device:a})||this;_.type=x.Texture,o=(0,ep.pi)({dimension:J.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},o);var E=_.device.gl,u=_.clampmipLevelCount(o);if(_.immutable=o.usage===$.RENDER_TARGET,_.pixelStore=o.pixelStore,_.format=o.format,_.dimension=o.dimension,_.formatKind=eF(o.format),_.width=o.width,_.height=o.height,_.depthOrArrayLayers=o.depthOrArrayLayers,_.mipmaps=u>=1,!s){n=_.device.ensureResourceExists(E.createTexture());var l=_.device.translateTextureType(o.format),R=_.device.translateTextureInternalFormat(o.format);if(_.device.setActiveTexture(E.TEXTURE0),_.device.currentTextures[0]=null,_.preprocessImage(),o.dimension===J.TEXTURE_2D){if(r=y.TEXTURE_2D,E.bindTexture(r,n),_.immutable){if(tC(E))E.texStorage2D(r,u,R,o.width,o.height);else{var c=(R===y.DEPTH_COMPONENT||_.isNPOT(),0);(_.format!==eE.D32F&&_.format!==eE.D24_S8||tC(E)||a.WEBGL_depth_texture)&&(E.texImage2D(r,c,R,o.width,o.height,0,R,l,null),_.mipmaps&&(_.mipmaps=!1,E.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),E.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),E.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE)))}}eg(1===o.depthOrArrayLayers)}else if(o.dimension===J.TEXTURE_2D_ARRAY)r=y.TEXTURE_2D_ARRAY,E.bindTexture(r,n),_.immutable&&tC(E)&&E.texStorage3D(r,u,R,o.width,o.height,o.depthOrArrayLayers);else if(o.dimension===J.TEXTURE_3D)r=y.TEXTURE_3D,E.bindTexture(r,n),_.immutable&&tC(E)&&E.texStorage3D(r,u,R,o.width,o.height,o.depthOrArrayLayers);else if(o.dimension===J.TEXTURE_CUBE_MAP)r=y.TEXTURE_CUBE_MAP,E.bindTexture(r,n),_.immutable&&tC(E)&&E.texStorage2D(r,u,R,o.width,o.height),eg(6===o.depthOrArrayLayers);else throw Error("whoops")}return _.gl_texture=n,_.gl_target=r,_.mipLevelCount=u,_}return(0,ep.ZT)(t,e),t.prototype.setImageData=function(e,t){void 0===t&&(t=0);var r,n,i,a=this.device.gl;tF(this.format);var o=this.gl_target===y.TEXTURE_3D||this.gl_target===y.TEXTURE_2D_ARRAY,s=this.gl_target===y.TEXTURE_CUBE_MAP,_=(r=e[0],Object.prototype.toString.call(r) in tf);this.device.setActiveTexture(a.TEXTURE0),this.device.currentTextures[0]=null;var E=e[0];_?(n=this.width,i=this.height):(n=E.width,i=E.height,this.width=n,this.height=i),a.bindTexture(this.gl_target,this.gl_texture);var u=this.device.translateTextureFormat(this.format),l=tC(a)?this.device.translateInternalTextureFormat(this.format):u,R=this.device.translateTextureType(this.format);this.preprocessImage();for(var c=0;c<this.depthOrArrayLayers;c++){var T=e[c],A=this.gl_target;s&&(A=y.TEXTURE_CUBE_MAP_POSITIVE_X+c%6),this.immutable?a.texSubImage2D(A,t,0,0,n,i,u,R,T):tC(a)?o?a.texImage3D(A,t,l,n,i,this.depthOrArrayLayers,0,u,R,T):a.texImage2D(A,t,l,n,i,0,u,R,T):_?a.texImage2D(A,t,u,n,i,0,u,R,T):a.texImage2D(A,t,u,u,R,T)}this.mipmaps&&this.generateMipmap(o)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(tU(this))},t.prototype.clampmipLevelCount=function(e){if(e.dimension===J.TEXTURE_2D_ARRAY&&e.depthOrArrayLayers>1&&eB(e.format)===eo.BC1)for(var t=e.width,r=e.height,n=0;n<e.mipLevelCount;n++){if(t<=2||r<=2)return n-1;t=Math.max(t/2|0,1),r=Math.max(r/2|0,1)}return e.mipLevelCount},t.prototype.preprocessImage=function(){var e=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&e.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&e.pixelStorei(y.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&e.pixelStorei(y.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},t.prototype.generateMipmap=function(e){void 0===e&&(e=!1);var t=this.device.gl;return!tC(t)&&this.isNPOT()||this.gl_texture&&this.gl_target&&(t.bindTexture(this.gl_target,this.gl_texture),e?(t.texParameteri(this.gl_target,y.TEXTURE_BASE_LEVEL,0),t.texParameteri(this.gl_target,y.TEXTURE_MAX_LEVEL,Math.log2(this.width)),t.texParameteri(this.gl_target,y.TEXTURE_MIN_FILTER,y.LINEAR_MIPMAP_LINEAR),t.texParameteri(this.gl_target,y.TEXTURE_MAG_FILTER,y.LINEAR)):t.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST_MIPMAP_LINEAR),t.generateMipmap(this.gl_target),t.bindTexture(this.gl_target,null)),this},t.prototype.isNPOT=function(){return!tC(this.device.gl)&&(!eP(this.width)||!eP(this.height))},t}(tN),tx=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;a.type=x.RenderTarget,a.gl_renderbuffer=null,a.texture=null;var o=a.device.gl,s=i.format,_=i.width,E=i.height,u=i.sampleCount,l=void 0===u?1:u,R=i.texture,c=!1;if(s!==eE.D32F&&s!==eE.D24_S8||!R||tC(o)||n.WEBGL_depth_texture||(R.destroy(),a.texture=null,c=!0),!c&&R)a.texture=R;else{a.gl_renderbuffer=a.device.ensureResourceExists(o.createRenderbuffer()),o.bindRenderbuffer(o.RENDERBUFFER,a.gl_renderbuffer);var T=a.device.translateTextureInternalFormat(s,!0);tC(o)&&l>1?o.renderbufferStorageMultisample(y.RENDERBUFFER,l,T,_,E):o.renderbufferStorage(y.RENDERBUFFER,T,_,E)}return a.format=s,a.width=_,a.height=E,a.sampleCount=l,a}return(0,ep.ZT)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),null!==this.gl_renderbuffer&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},t}(tN);(v=eR||(eR={}))[v.NeedsCompile=0]="NeedsCompile",v[v.Compiling=1]="Compiling",v[v.NeedsBind=2]="NeedsBind",v[v.ReadyToUse=3]="ReadyToUse";var tX=function(e){function t(t,r){var n=t.id,i=t.device,a=t.descriptor,o=e.call(this,{id:n,device:i})||this;o.rawVertexGLSL=r,o.type=x.Program,o.uniformSetters={},o.attributes=[];var s=o.device.gl;return o.descriptor=a,o.gl_program=o.device.ensureResourceExists(s.createProgram()),o.gl_shader_vert=null,o.gl_shader_frag=null,o.compileState=eR.NeedsCompile,o.tryCompileProgram(),o}return(0,ep.ZT)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},t.prototype.tryCompileProgram=function(){eg(this.compileState===eR.NeedsCompile);var e=this.descriptor,t=e.vertex,r=e.fragment,n=this.device.gl;(null==t?void 0:t.glsl)&&(null==r?void 0:r.glsl)&&(this.gl_shader_vert=this.compileShader(t.postprocess?t.postprocess(t.glsl):t.glsl,n.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(r.postprocess?r.postprocess(r.glsl):r.glsl,n.FRAGMENT_SHADER),n.attachShader(this.gl_program,this.gl_shader_vert),n.attachShader(this.gl_program,this.gl_shader_frag),n.linkProgram(this.gl_program),this.compileState=eR.Compiling,tC(n)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},t.prototype.readAttributesFromLinkedProgram=function(){for(var e,t,r,n,i,a=this.device.gl,o=a.getProgramParameter(this.gl_program,a.ACTIVE_ATTRIBUTES),s=(e=this.descriptor.vertex.glsl,t={},e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(e,r,n){var i=Number(n);return t[r]=isNaN(i)?n:i,""}),t),_=(r=this.rawVertexGLSL,n=[],r.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(e,t,r){var i=Number(t);return n.push({location:isNaN(i)?s[t]:i,name:r}),""}),n),E=this,u=0;u<o;u++)!function(e){var t=a.getActiveAttrib(E.gl_program,e),r=t.name,n=t.type,o=t.size,s=a.getAttribLocation(E.gl_program,r),u=null===(i=_.find(function(e){return e.name===r}))||void 0===i?void 0:i.location;s>=0&&!(0,eA.Z)(u)&&(E.attributes[u]={name:r,location:s,type:n,size:o})}(u)},t.prototype.readUniformLocationsFromLinkedProgram=function(){for(var e=this.device.gl,t=e.getProgramParameter(this.gl_program,e.ACTIVE_UNIFORMS),r=0;r<t;r++){var n=e.getActiveUniform(this.gl_program,r),i=function(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(tr);if(!t||t.length<2)throw Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:Number(t[2])||1,isArray:!!t[2]}}(n.name).name,a=e.getUniformLocation(this.gl_program,i);if(this.uniformSetters[i]=td(e,a,n),n&&n.size>1)for(var o=0;o<n.size;o++)a=e.getUniformLocation(this.gl_program,"".concat(i,"[").concat(o,"]")),this.uniformSetters["".concat(i,"[").concat(o,"]")]=td(e,a,n)}},t.prototype.compileShader=function(e,t){var r=this.device.gl,n=this.device.ensureResourceExists(r.createShader(t));return r.shaderSource(n,e),r.compileShader(n),n},t.prototype.setUniformsLegacy=function(e){void 0===e&&(e={});var t=this.device.gl;if(!tC(t)){var r=!1;for(var n in e){r||(t.useProgram(this.gl_program),r=!0);var i=e[n],a=this.uniformSetters[n];if(a){var o=i;o instanceof ty&&(o=o.textureIndex),a(o)}}}return this},t}(tN),tw=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;a.type=x.QueryPool;var o=a.device.gl;if(tC(o)){var s=i.elemCount,_=i.type;a.gl_query=function(e,t){for(var r=Array(e),n=0;n<e;n++)r[n]=t();return r}(s,function(){return a.device.ensureResourceExists(o.createQuery())}),a.gl_query_type=function(e){if(e===ea.OcclusionConservative)return y.ANY_SAMPLES_PASSED_CONSERVATIVE;throw Error("whoops")}(_)}return a}return(0,ep.ZT)(t,e),t.prototype.queryResultOcclusion=function(e){var t=this.device.gl;if(tC(t)){var r=this.gl_query[e];return t.getQueryParameter(r,t.QUERY_RESULT_AVAILABLE)?!!t.getQueryParameter(r,t.QUERY_RESULT):null}return null},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this.device.gl;if(tC(t))for(var r=0;r<this.gl_query.length;r++)t.deleteQuery(this.gl_query[r])},t}(tN),tW=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=x.Readback,i.gl_pbo=null,i.gl_sync=null,i}return(0,ep.ZT)(t,e),t.prototype.clientWaitAsync=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=10);var n=this.device.gl;return new Promise(function(i,a){!function o(){var s=n.clientWaitSync(e,t,0);if(s==n.WAIT_FAILED){a();return}if(s==n.TIMEOUT_EXPIRED){setTimeout(o,(0,ef.Z)(r,0,n.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}i()}()})},t.prototype.getBufferSubDataAsync=function(e,t,r,n,i,a){return(0,ep.mG)(this,void 0,void 0,function(){var o;return(0,ep.Jh)(this,function(s){switch(s.label){case 0:if(!tC(o=this.device.gl))return[3,2];return this.gl_sync=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0),o.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)];case 1:return s.sent(),o.bindBuffer(e,t),o.getBufferSubData(e,r,n,i,a),o.bindBuffer(e,null),[2,n];case 2:return[2]}})})},t.prototype.readTexture=function(e,t,r,n,i,a,o,s){return void 0===o&&(o=0),void 0===s&&(s=a.byteLength||0),(0,ep.mG)(this,void 0,void 0,function(){var _,E,u,l,R;return(0,ep.Jh)(this,function(c){var T;return(_=this.device.gl,E=e,u=this.device.translateTextureFormat(E.format),l=this.device.translateTextureType(E.format),R=eC(eB(T=E.format))*eN(T),tC(_))?(this.gl_pbo=this.device.ensureResourceExists(_.createBuffer()),_.bindBuffer(_.PIXEL_PACK_BUFFER,this.gl_pbo),_.bufferData(_.PIXEL_PACK_BUFFER,s,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null),_.bindFramebuffer(y.READ_FRAMEBUFFER,this.device.readbackFramebuffer),_.framebufferTexture2D(y.READ_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,E.gl_texture,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,this.gl_pbo),_.readPixels(t,r,n,i,u,l,o*R),_.bindBuffer(_.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(_.PIXEL_PACK_BUFFER,this.gl_pbo,0,a,o,0)]):[2,this.readTextureSync(e,t,r,n,i,a,o,s)]})})},t.prototype.readTextureSync=function(e,t,r,n,i,a,o,s){void 0===s&&(s=a.byteLength||0);var _=this.device.gl,E=this.device.translateTextureType(e.format);return _.bindFramebuffer(y.FRAMEBUFFER,this.device.readbackFramebuffer),_.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,e.gl_texture,0),_.pixelStorei(_.PACK_ALIGNMENT,4),_.readPixels(t,r,n,i,_.RGBA,E,a),a},t.prototype.readBuffer=function(e,t,r,n,i){return(0,ep.mG)(this,void 0,void 0,function(){var a;return(0,ep.Jh)(this,function(o){return tC(a=this.device.gl)?[2,this.getBufferSubDataAsync(a.ARRAY_BUFFER,tM(e,t),t,r,n,i)]:[2,Promise.reject()]})})},t.prototype.destroy=function(){e.prototype.destroy.call(this),tC(this.device.gl)&&(null!==this.gl_sync&&this.device.gl.deleteSync(this.gl_sync),null!==this.gl_pbo&&this.device.gl.deleteBuffer(this.gl_pbo))},t}(tN),tH=function(e){function t(t){var r,n,i=t.id,a=t.device,o=t.descriptor,s=e.call(this,{id:i,device:a})||this;return s.type=x.RenderPipeline,s.drawMode=function(e){switch(e){case Z.TRIANGLES:return y.TRIANGLES;case Z.POINTS:return y.POINTS;case Z.TRIANGLE_STRIP:return y.TRIANGLE_STRIP;case Z.LINES:return y.LINES;case Z.LINE_STRIP:return y.LINE_STRIP;default:throw Error("Unknown primitive topology mode")}}(null!==(r=o.topology)&&void 0!==r?r:Z.TRIANGLES),s.program=o.program,s.inputLayout=o.inputLayout,s.megaState=(0,ep.pi)((0,ep.pi)({},ew(eH)),o.megaStateDescriptor),s.colorAttachmentFormats=o.colorAttachmentFormats.slice(),s.depthStencilAttachmentFormat=o.depthStencilAttachmentFormat,s.sampleCount=null!==(n=o.sampleCount)&&void 0!==n?n:1,s}return(0,ep.ZT)(t,e),t}(tN),tV=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;return a.type=x.ComputePipeline,a.descriptor=i,a}return(0,ep.ZT)(t,e),t}(tN),tk=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(e){this.creationStacks.set(e,Error().stack),this.liveObjects.add(e)},e.prototype.trackResourceDestroyed=function(e){this.deletionStacks.has(e)&&console.warn("Object double freed:",e,"\n\nCreation stack: ",this.creationStacks.get(e),"\n\nDeletion stack: ",this.deletionStacks.get(e),"\n\nThis stack: ",Error().stack),this.deletionStacks.set(e,Error().stack),this.liveObjects.delete(e)},e.prototype.checkForLeaks=function(){var e,t;try{for(var r=(0,ep.XA)(this.liveObjects.values()),n=r.next();!n.done;n=r.next()){var i=n.value;console.warn("Object leaked:",i,"Creation stack:",this.creationStacks.get(i))}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.setResourceLeakCheck=function(e,t){t?this.liveObjects.add(e):this.liveObjects.delete(e)},e}(),tY=function(e){function t(t){var r,n,i=t.id,a=t.device,o=t.descriptor,s=e.call(this,{id:i,device:a})||this;s.type=x.Sampler;var _=s.device.gl;if(tC(_)){var E=s.device.ensureResourceExists(_.createSampler());_.samplerParameteri(E,y.TEXTURE_WRAP_S,tm(o.addressModeU)),_.samplerParameteri(E,y.TEXTURE_WRAP_T,tm(o.addressModeV)),_.samplerParameteri(E,y.TEXTURE_WRAP_R,tm(null!==(r=o.addressModeW)&&void 0!==r?r:o.addressModeU)),_.samplerParameteri(E,y.TEXTURE_MIN_FILTER,tI(o.minFilter,o.mipmapFilter)),_.samplerParameteri(E,y.TEXTURE_MAG_FILTER,tI(o.magFilter,K.NO_MIP)),void 0!==o.lodMinClamp&&_.samplerParameterf(E,y.TEXTURE_MIN_LOD,o.lodMinClamp),void 0!==o.lodMaxClamp&&_.samplerParameterf(E,y.TEXTURE_MAX_LOD,o.lodMaxClamp),void 0!==o.compareFunction&&(_.samplerParameteri(E,_.TEXTURE_COMPARE_MODE,_.COMPARE_REF_TO_TEXTURE),_.samplerParameteri(E,_.TEXTURE_COMPARE_FUNC,o.compareFunction));var u=null!==(n=o.maxAnisotropy)&&void 0!==n?n:1;u>1&&null!==s.device.EXT_texture_filter_anisotropic&&(eg(o.minFilter===Y.BILINEAR&&o.magFilter===Y.BILINEAR&&o.mipmapFilter===K.LINEAR),_.samplerParameterf(E,s.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u)),s.gl_sampler=E}else s.descriptor=o;return s}return(0,ep.ZT)(t,e),t.prototype.setTextureParameters=function(e,t,r){var n,i=this.device.gl,a=this.descriptor;this.isNPOT(t,r)?i.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR):i.texParameteri(e,y.TEXTURE_MIN_FILTER,tI(a.minFilter,a.mipmapFilter)),i.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,tm(a.addressModeU)),i.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,tm(a.addressModeV)),i.texParameteri(e,y.TEXTURE_MAG_FILTER,tI(a.magFilter,K.NO_MIP));var o=null!==(n=a.maxAnisotropy)&&void 0!==n?n:1;o>1&&null!==this.device.EXT_texture_filter_anisotropic&&(eg(a.minFilter===Y.BILINEAR&&a.magFilter===Y.BILINEAR&&a.mipmapFilter===K.LINEAR),i.texParameteri(e,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o))},t.prototype.destroy=function(){e.prototype.destroy.call(this),tC(this.device.gl)&&this.device.gl.deleteSampler(tL(this))},t.prototype.isNPOT=function(e,t){return!eP(e)||!eP(t)},t}(tN),tK=function(){function e(){}return e.prototype.dispatchWorkgroups=function(e,t,r){},e.prototype.dispatchWorkgroupsIndirect=function(e,t){},e.prototype.setPipeline=function(e){},e.prototype.setBindings=function(e){},e.prototype.pushDebugGroup=function(e){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(e){},e}(),tZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=x.RenderBundle,t.commands=[],t}return(0,ep.ZT)(t,e),t.prototype.push=function(e){this.commands.push(e)},t.prototype.replay=function(){this.commands.forEach(function(e){return e()})},t}(tN),tz=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,tq=function(){function e(e,t){void 0===t&&(t={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=ew(eH),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=en.LOWER_LEFT,this.clipSpaceNearZ=ei.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=e,this.contextAttributes=eO(e.getContextAttributes()),tC(e)?(this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=e.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=e.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=e.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=e.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=e.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),e.getExtension("EXT_frag_depth"),e.getExtension("OES_element_index_uint"),e.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=e.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=e.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=e.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=e.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=e.getExtension("KHR_parallel_shader_compile"),tC(e)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new ty({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:J.TEXTURE_2D,mipLevelCount:1,usage:$.RENDER_TARGET,format:!1===this.contextAttributes.alpha?eE.U8_RGB_RT:eE.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=er.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(J.TEXTURE_2D,er.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(J.TEXTURE_2D,er.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:z.VERTEX,hint:q.STATIC}),tC(e)&&(this.fallbackTexture2DArray=this.createFallbackTexture(J.TEXTURE_2D_ARRAY,er.Float),this.fallbackTexture3D=this.createFallbackTexture(J.TEXTURE_3D,er.Float),this.fallbackTextureCube=this.createFallbackTexture(J.TEXTURE_CUBE_MAP,er.Float)),this.currentMegaState.depthCompare=X.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=ee.ALL,e.enable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),this.checkLimits(),t.shaderDebug&&(this.shaderDebug=!0),t.trackResources&&(this.resourceCreationTracker=new tk)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(e,t){var r=e===J.TEXTURE_CUBE_MAP?6:1,n=t===er.Depth?eE.D32F:eE.U8_RGBA_NORM,i=this.createTexture({dimension:e,format:n,usage:$.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1});return t===er.Float&&i.setImageData([new Uint8Array(4*r)]),tU(i)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var e=this.gl;if(this.maxVertexAttribs=e.getParameter(y.MAX_VERTEX_ATTRIBS),tC(e)){this.uniformBufferMaxPageByteSize=Math.min(e.getParameter(y.MAX_UNIFORM_BLOCK_SIZE),65536),this.uniformBufferWordAlignment=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var t=e.getInternalformatParameter(e.RENDERBUFFER,e.DEPTH32F_STENCIL8,e.SAMPLES);this.supportedSampleCounts=t?(0,ep.ev)([],(0,ep.CR)(t),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=65536;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(e,t){return e-t})},e.prototype.configureSwapChain=function(e,t,r){var n=this.scTexture;n.width=e,n.height=t,this.scPlatformFramebuffer=void 0===r?null:r},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(e,t){switch(void 0===t&&(t=!1),e){case eE.ALPHA:return y.ALPHA;case eE.U8_LUMINANCE:case eE.F16_LUMINANCE:case eE.F32_LUMINANCE:return y.LUMINANCE;case eE.F16_R:return y.R16F;case eE.F16_RG:return y.RG16F;case eE.F16_RGB:return y.RGB16F;case eE.F16_RGBA:return y.RGBA16F;case eE.F32_R:return y.R32F;case eE.F32_RG:return y.RG32F;case eE.F32_RGB:return y.RGB32F;case eE.F32_RGBA:return tC(this.gl)?y.RGBA32F:t?this.WEBGL_color_buffer_float.RGBA32F_EXT:y.RGBA;case eE.U8_R_NORM:return y.R8;case eE.U8_RG_NORM:return y.RG8;case eE.U8_RGB_NORM:case eE.U8_RGB_RT:return y.RGB8;case eE.U8_RGB_SRGB:return y.SRGB8;case eE.U8_RGBA_NORM:case eE.U8_RGBA_RT:return tC(this.gl)?y.RGBA8:t?y.RGBA4:y.RGBA;case eE.U8_RGBA:return y.RGBA;case eE.U8_RGBA_SRGB:case eE.U8_RGBA_RT_SRGB:return y.SRGB8_ALPHA8;case eE.U16_R:return y.R16UI;case eE.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case eE.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case eE.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case eE.U16_RGBA_5551:return y.RGB5_A1;case eE.U16_RGB_565:return y.RGB565;case eE.U32_R:return y.R32UI;case eE.S8_RGBA_NORM:return y.RGBA8_SNORM;case eE.S8_RG_NORM:return y.RG8_SNORM;case eE.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case eE.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case eE.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case eE.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case eE.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case eE.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case eE.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case eE.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case eE.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case eE.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case eE.D32F_S8:return tC(this.gl)?y.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?y.DEPTH_STENCIL:y.DEPTH_COMPONENT16;case eE.D24_S8:return tC(this.gl)?y.DEPTH24_STENCIL8:this.WEBGL_depth_texture?y.DEPTH_STENCIL:y.DEPTH_COMPONENT16;case eE.D32F:return tC(this.gl)?y.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?y.DEPTH_COMPONENT:y.DEPTH_COMPONENT16;case eE.D24:return tC(this.gl)?y.DEPTH_COMPONENT24:this.WEBGL_depth_texture?y.DEPTH_COMPONENT:y.DEPTH_COMPONENT16;default:throw Error("whoops")}},e.prototype.translateTextureType=function(e){switch(eB(e)){case eo.U8:return y.UNSIGNED_BYTE;case eo.U16:return y.UNSIGNED_SHORT;case eo.U32:return y.UNSIGNED_INT;case eo.S8:return y.BYTE;case eo.F16:return y.HALF_FLOAT;case eo.F32:return y.FLOAT;case eo.U16_PACKED_5551:return y.UNSIGNED_SHORT_5_5_5_1;case eo.D32F:return tC(this.gl)?y.FLOAT:this.WEBGL_depth_texture?y.UNSIGNED_INT:y.UNSIGNED_BYTE;case eo.D24:return tC(this.gl)?y.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?y.UNSIGNED_SHORT:y.UNSIGNED_BYTE;case eo.D24S8:return tC(this.gl)?y.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?y.UNSIGNED_INT_24_8_WEBGL:y.UNSIGNED_BYTE;case eo.D32FS8:return y.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw Error("whoops")}},e.prototype.translateInternalTextureFormat=function(e){switch(e){case eE.F32_R:return y.R32F;case eE.F32_RG:return y.RG32F;case eE.F32_RGB:return y.RGB32F;case eE.F32_RGBA:return y.RGBA32F;case eE.F16_R:return y.R16F;case eE.F16_RG:return y.RG16F;case eE.F16_RGB:return y.RGB16F;case eE.F16_RGBA:return y.RGBA16F}return this.translateTextureFormat(e)},e.prototype.translateTextureFormat=function(e){if(tF(e)||e===eE.F32_LUMINANCE||e===eE.U8_LUMINANCE)return this.translateTextureInternalFormat(e);var t=tC(this.gl)||!tC(this.gl)&&!!this.WEBGL_depth_texture;switch(e){case eE.D24_S8:case eE.D32F_S8:return t?y.DEPTH_STENCIL:y.RGBA;case eE.D24:case eE.D32F:return t?y.DEPTH_COMPONENT:y.RGBA}var r=tg(e);switch(eN(e)){case es.A:return y.ALPHA;case es.R:return r?y.RED_INTEGER:y.RED;case es.RG:return r?y.RG_INTEGER:y.RG;case es.RGB:return r?y.RGB_INTEGER:y.RGB;case es.RGBA:return y.RGBA}},e.prototype.setActiveTexture=function(e){this.currentActiveTexture!==e&&(this.gl.activeTexture(e),this.currentActiveTexture=e)},e.prototype.bindVAO=function(e){this.currentBoundVAO!==e&&(tC(this.gl)?this.gl.bindVertexArray(e):this.OES_vertex_array_object.bindVertexArrayOES(e),this.currentBoundVAO=e)},e.prototype.programCompiled=function(e){eg(e.compileState!==eR.NeedsCompile),e.compileState===eR.Compiling&&(e.compileState=eR.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(e))},e.prototype.useProgram=function(e){this.currentProgram!==e&&(this.programCompiled(e),this.gl.useProgram(e.gl_program),this.currentProgram=e)},e.prototype.ensureResourceExists=function(e){if(null!==e)return e;var t=this.gl.getError();throw Error("Created resource is null; GL error encountered: ".concat(t))},e.prototype.createBuffer=function(e){return new tG({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTexture=function(e){return new ty({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createSampler=function(e){return new tY({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTarget=function(e){return new tx({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTargetFromTexture=function(e){var t=e.format,r=e.width,n=e.height;return eg(1===e.mipLevelCount),this.createRenderTarget({format:t,width:r,height:n,sampleCount:1,texture:e})},e.prototype.createProgram=function(e){var t,r,n,i=null===(t=e.vertex)||void 0===t?void 0:t.glsl;return(null===(r=e.vertex)||void 0===r?void 0:r.glsl)&&(e.vertex.glsl=tS(this.queryVendorInfo(),"vert",e.vertex.glsl)),(null===(n=e.fragment)||void 0===n?void 0:n.glsl)&&(e.fragment.glsl=tS(this.queryVendorInfo(),"frag",e.fragment.glsl)),this.createProgramSimple(e,i)},e.prototype.createProgramSimple=function(e,t){return new tX({id:this.getNextUniqueId(),device:this,descriptor:e},t)},e.prototype.createBindings=function(e){return new tB({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createInputLayout=function(e){return new tb({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderPipeline=function(e){return new tH({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createComputePass=function(){return new tK},e.prototype.createComputePipeline=function(e){return new tV({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createReadback=function(){return new tW({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(e,t){return new tw({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:t}})},e.prototype.formatRenderPassDescriptor=function(e){var t,r,n,i,a,o,s=e.colorAttachment;e.depthClearValue=null!==(t=e.depthClearValue)&&void 0!==t?t:"load",e.stencilClearValue=null!==(r=e.stencilClearValue)&&void 0!==r?r:"load";for(var _=0;_<s.length;_++)e.colorAttachmentLevel||(e.colorAttachmentLevel=[]),e.colorAttachmentLevel[_]=null!==(n=e.colorAttachmentLevel[_])&&void 0!==n?n:0,e.colorResolveToLevel||(e.colorResolveToLevel=[]),e.colorResolveToLevel[_]=null!==(i=e.colorResolveToLevel[_])&&void 0!==i?i:0,e.colorClearColor||(e.colorClearColor=[]),e.colorClearColor[_]=null!==(a=e.colorClearColor[_])&&void 0!==a?a:"load",e.colorStore||(e.colorStore=[]),e.colorStore[_]=null!==(o=e.colorStore[_])&&void 0!==o&&o},e.prototype.createRenderBundle=function(){return new tZ({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(e){this.renderBundle=e},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(e){e.forEach(function(e){e.replay()})},e.prototype.createRenderPass=function(e){null!==this.currentRenderPassDescriptor&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=e,this.formatRenderPassDescriptor(e);var t=e.colorAttachment,r=e.colorAttachmentLevel,n=e.colorClearColor,i=e.colorResolveTo,a=e.colorResolveToLevel,o=e.depthStencilAttachment,s=e.depthClearValue,_=e.stencilClearValue,E=e.depthStencilResolveTo,u=i&&1===i.length&&i[0]===this.scTexture;this.setRenderPassParametersBegin(t.length,u);for(var l=0;l<t.length;l++)this.setRenderPassParametersColor(l,t[l],r[l],i[l],a[l],u);this.setRenderPassParametersDepthStencil(o,E,u),this.validateCurrentAttachments();for(var l=0;l<t.length;l++){var R=n[l];"load"!==R&&this.setRenderPassParametersClearColor(l,R.r,R.g,R.b,R.a)}return this.setRenderPassParametersClearDepthStencil(s,_),this},e.prototype.submitPass=function(e){eg(null!==this.currentRenderPassDescriptor),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(e,t,r,n,i,a){var o=this.gl;if(eg(1===n.mipLevelCount),eg(1===e.mipLevelCount),tC(o))e===this.scTexture?o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,e,0)),o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,n,0),o.blitFramebuffer(i,a,i+n.width,a+n.height,t,r,t+n.width,r+n.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null);else if(e===this.scTexture){var s=this.createRenderTargetFromTexture(n);this.submitBlitRenderPass(s,e)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(e,t,r){switch(e){case eE.BC1_SRGB:case eE.BC2_SRGB:case eE.BC3_SRGB:if(null!==this.WEBGL_compressed_texture_s3tc_srgb)return t%4==0&&r%4==0;return!1;case eE.BC1:case eE.BC2:case eE.BC3:if(null!==this.WEBGL_compressed_texture_s3tc)return t%4==0&&r%4==0;return!1;case eE.BC4_UNORM:case eE.BC4_SNORM:case eE.BC5_UNORM:case eE.BC5_SNORM:if(null!==this.EXT_texture_compression_rgtc)return t%4==0&&r%4==0;return!1;case eE.U16_R_NORM:case eE.U16_RG_NORM:case eE.U16_RGBA_NORM:return null!==this.EXT_texture_norm16;case eE.F32_R:case eE.F32_RG:case eE.F32_RGB:case eE.F32_RGBA:return null!==this.OES_texture_float_linear;case eE.F16_R:case eE.F16_RG:case eE.F16_RGB:case eE.F16_RGBA:return null!==this.OES_texture_half_float_linear;default:return!0}},e.prototype.queryProgramReady=function(e){var t=this.gl;if(e.compileState===eR.NeedsCompile)throw Error("whoops");if(e.compileState===eR.Compiling){var r=void 0;return(r=null===this.KHR_parallel_shader_compile||t.getProgramParameter(e.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR))&&this.programCompiled(e),r}return e.compileState===eR.NeedsBind||e.compileState===eR.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(e){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(e){return e},e.prototype.setResourceName=function(e,t){if(e.name=t,e.type===x.Buffer)for(var r=e.gl_buffer_pages,n=0;n<r.length;n++)tD(r[n],"".concat(t," Page ").concat(n));else if(e.type===x.Texture)tD(tU(e),t);else if(e.type===x.Sampler)tD(tL(e),t);else if(e.type===x.RenderTarget){var i=e.gl_renderbuffer;null!==i&&tD(i,t)}else e.type===x.InputLayout&&tD(e.vao,t)},e.prototype.setResourceLeakCheck=function(e,t){null!==this.resourceCreationTracker&&this.resourceCreationTracker.setResourceLeakCheck(e,t)},e.prototype.checkForLeaks=function(){null!==this.resourceCreationTracker&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(e){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(e){},e.prototype.programPatched=function(e,t){eg(this.shaderDebug)},e.prototype.getBufferData=function(e,t,r){void 0===r&&(r=0);var n=this.gl;tC(n)&&(n.bindBuffer(n.COPY_READ_BUFFER,tM(e,4*r)),n.getBufferSubData(n.COPY_READ_BUFFER,4*r,t))},e.prototype.debugGroupStatisticsDrawCall=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].drawCallCount+=e},e.prototype.debugGroupStatisticsBufferUpload=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].bufferUploadCount+=e},e.prototype.debugGroupStatisticsTextureBind=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].textureBindCount+=e},e.prototype.debugGroupStatisticsTriangles=function(e){for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].triangleCount+=e},e.prototype.reportShaderError=function(e,t){var r=this.gl,n=r.getShaderParameter(e,r.COMPILE_STATUS);if(!n){console.error((void 0===i&&(i=1),t.split("\n").map(function(e,t){return"".concat(function(e,t,r){for(void 0===r&&(r="0");e.length<4;)e="".concat(r).concat(e);return e}(""+(i+t),0," "),"  ").concat(e)}).join("\n")));var i,a=r.getExtension("WEBGL_debug_shaders");a&&console.error(a.getTranslatedShaderSource(e)),console.error(r.getShaderInfoLog(e))}return n},e.prototype.checkProgramCompilationForErrors=function(e){var t=this.gl,r=e.gl_program;if(!t.getProgramParameter(r,t.LINK_STATUS)){var n=e.descriptor;if(!this.reportShaderError(e.gl_shader_vert,n.vertex.glsl)||!this.reportShaderError(e.gl_shader_frag,n.fragment.glsl))return;console.error(t.getProgramInfoLog(e.gl_program))}},e.prototype.bindFramebufferAttachment=function(e,t,r,n){var i=this.gl;if((0,eA.Z)(r))i.framebufferRenderbuffer(e,t,i.RENDERBUFFER,null);else if(r.type===x.RenderTarget)null!==r.gl_renderbuffer?i.framebufferRenderbuffer(e,t,i.RENDERBUFFER,r.gl_renderbuffer):null!==r.texture&&i.framebufferTexture2D(e,t,y.TEXTURE_2D,tU(r.texture),n);else if(r.type===x.Texture){var a=tU(r);r.dimension===J.TEXTURE_2D?i.framebufferTexture2D(e,t,y.TEXTURE_2D,a,n):tC(i)&&(r.dimension,J.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(e,t){var r=this.gl,n=(0,eA.Z)(t)?e_.Depth|e_.Stencil:255&t.format,i=!!(n&e_.Depth),a=!!(n&e_.Stencil);i&&a?tC(this.gl)||!tC(this.gl)&&this.WEBGL_depth_texture?this.bindFramebufferAttachment(e,r.DEPTH_STENCIL_ATTACHMENT,t,0):this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,t,0):i?(this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,t,0),this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,null,0)):a&&(this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,t,0),this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var e=-1,t=-1,r=-1,n=0;n<this.currentColorAttachments.length;n++){var i=this.currentColorAttachments[n];null!==i&&(-1===e?(e=i.sampleCount,t=i.width,r=i.height):(eg(e===i.sampleCount),eg(t===i.width),eg(r===i.height)))}this.currentDepthStencilAttachment&&(-1===e?e=this.currentDepthStencilAttachment.sampleCount:(eg(e===this.currentDepthStencilAttachment.sampleCount),eg(t===this.currentDepthStencilAttachment.width),eg(r===this.currentDepthStencilAttachment.height))),this.currentSampleCount=e},e.prototype.setRenderPassParametersBegin=function(e,t){void 0===t&&(t=!1);var r=this.gl;if(t)r.bindFramebuffer(y.FRAMEBUFFER,null);else if(tC(r)?r.bindFramebuffer(y.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(y.FRAMEBUFFER,this.renderPassDrawFramebuffer),tC(r)?r.drawBuffers([y.COLOR_ATTACHMENT0,y.COLOR_ATTACHMENT1,y.COLOR_ATTACHMENT2,y.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([y.COLOR_ATTACHMENT0_WEBGL,y.COLOR_ATTACHMENT1_WEBGL,y.COLOR_ATTACHMENT2_WEBGL,y.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var n=e;n<this.currentColorAttachments.length;n++){var i=tC(r)?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,a=tC(r)?y.COLOR_ATTACHMENT0:y.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(i,a+n,y.RENDERBUFFER,null),r.framebufferTexture2D(i,a+n,y.TEXTURE_2D,null,0)}this.currentColorAttachments.length=e},e.prototype.setRenderPassParametersColor=function(e,t,r,n,i,a){void 0===a&&(a=!1);var o=tC(this.gl);(this.currentColorAttachments[e]!==t||this.currentColorAttachmentLevels[e]!==r)&&(this.currentColorAttachments[e]=t,this.currentColorAttachmentLevels[e]=r,!a&&(o||!o&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(o?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,(o?y.COLOR_ATTACHMENT0:y.COLOR_ATTACHMENT0_WEBGL)+e,t,r),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[e]!==n||this.currentColorResolveToLevels[e]!==i)&&(this.currentColorResolveTos[e]=n,this.currentColorResolveToLevels[e]=i,null!==n&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(e,t,r){void 0===r&&(r=!1);var n=this.gl;this.currentDepthStencilAttachment!==e&&(this.currentDepthStencilAttachment=e,r||this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(tC(n)?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==t&&(this.currentDepthStencilResolveTo=t,t&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(e,t,r,n,i){var a=this.gl;if(null!==this.OES_draw_buffers_indexed){var o=this.currentMegaState.attachmentsState[e];o&&o.channelWriteMask!==ee.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(e,!0,!0,!0,!0),o.channelWriteMask=ee.ALL)}else{var o=this.currentMegaState.attachmentsState[0];o&&o.channelWriteMask!==ee.ALL&&(a.colorMask(!0,!0,!0,!0),o.channelWriteMask=ee.ALL)}this.setScissorRectEnabled(!1),tC(a)?a.clearBufferfv(a.COLOR,e,[t,r,n,i]):(a.clearColor(t,r,n,i),a.clear(a.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(e,t){void 0===e&&(e="load"),void 0===t&&(t="load");var r=this.gl;"load"!==e&&(eg(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(r.depthMask(!0),this.currentMegaState.depthWrite=!0),tC(r)?r.clearBufferfv(r.DEPTH,0,[e]):(r.clearDepth(e),r.clear(r.DEPTH_BUFFER_BIT))),"load"!==t&&(eg(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(r.enable(r.STENCIL_TEST),r.stencilMask(255),this.currentMegaState.stencilWrite=!0),tC(r)?r.clearBufferiv(r.STENCIL,0,[t]):(r.clearStencil(t),r.clear(r.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(e){var t,r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(e)});return}var n=this.gl,i=e.uniformBufferBindings,a=e.samplerBindings,o=e.bindingLayouts;eg(0<o.bindingLayoutTables.length);var s=o.bindingLayoutTables[0];eg(i.length>=s.numUniformBuffers),eg(a.length>=s.numSamplers);for(var _=0;_<i.length;_++){var E=i[_];if(0!==E.size){var u=s.firstUniformBuffer+_,l=E.buffer,R=E.offset||0,c=E.size||l.byteSize;if(l!==this.currentUniformBuffers[u]||R!==this.currentUniformBufferByteOffsets[u]||c!==this.currentUniformBufferByteSizes[u]){var T=R%l.pageByteSize,A=l.gl_buffer_pages[R/l.pageByteSize|0];eg(T+c<=l.pageByteSize),tC(n)&&n.bindBufferRange(n.UNIFORM_BUFFER,u,A,T,c),this.currentUniformBuffers[u]=l,this.currentUniformBufferByteOffsets[u]=R,this.currentUniformBufferByteSizes[u]=c}}}for(var _=0;_<s.numSamplers;_++){var E=a[_],d=s.firstSampler+_,f=null!==E&&null!==E.sampler?tL(E.sampler):null,p=null!==E&&null!==E.texture?tU(E.texture):null;if(this.currentSamplers[d]!==f&&(tC(n)&&n.bindSampler(d,f),this.currentSamplers[d]=f),this.currentTextures[d]!==p){if(this.setActiveTexture(n.TEXTURE0+d),null!==p){var h=eO(E).texture,S=h.gl_target,N=h.width,B=h.height;E.texture.textureIndex=d,n.bindTexture(S,p),tC(n)||null===(t=E.sampler)||void 0===t||t.setTextureParameters(S,N,B),this.debugGroupStatisticsTextureBind()}else{var C=(0,ep.pi)((0,ep.pi)({},E),eV),F=C.dimension,g=C.formatKind,S=function(e){if(e===J.TEXTURE_2D)return y.TEXTURE_2D;if(e===J.TEXTURE_2D_ARRAY)return y.TEXTURE_2D_ARRAY;if(e===J.TEXTURE_CUBE_MAP)return y.TEXTURE_CUBE_MAP;if(e===J.TEXTURE_3D)return y.TEXTURE_3D;throw Error("whoops")}(F);n.bindTexture(S,this.getFallbackTexture((0,ep.pi)({gl_target:S,formatKind:g},C)))}this.currentTextures[d]=p}}},e.prototype.setViewport=function(e,t,r,n){this.gl.viewport(e,t,r,n)},e.prototype.setScissorRect=function(e,t,r,n){var i=this.gl;this.setScissorRectEnabled(!0),i.scissor(e,t,r,n)},e.prototype.applyAttachmentStateIndexed=function(e,t,r){var n=this.gl,i=this.OES_draw_buffers_indexed;t.channelWriteMask!==r.channelWriteMask&&(i.colorMaskiOES(e,!!(r.channelWriteMask&ee.RED),!!(r.channelWriteMask&ee.GREEN),!!(r.channelWriteMask&ee.BLUE),!!(r.channelWriteMask&ee.ALPHA)),t.channelWriteMask=r.channelWriteMask);var a=t.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||t.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,o=t.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||t.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||t.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||t.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(o||a)&&(tv(t.rgbBlendState)&&tv(t.alphaBlendState)?i.enableiOES(e,n.BLEND):tv(r.rgbBlendState)&&tv(r.alphaBlendState)&&i.disableiOES(e,n.BLEND)),a&&(i.blendEquationSeparateiOES(e,r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),t.rgbBlendState.blendMode=r.rgbBlendState.blendMode,t.alphaBlendState.blendMode=r.alphaBlendState.blendMode),o&&(i.blendFuncSeparateiOES(e,r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),t.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,t.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,t.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(e,t){var r=this.gl;e.channelWriteMask!==t.channelWriteMask&&(r.colorMask(!!(t.channelWriteMask&ee.RED),!!(t.channelWriteMask&ee.GREEN),!!(t.channelWriteMask&ee.BLUE),!!(t.channelWriteMask&ee.ALPHA)),e.channelWriteMask=t.channelWriteMask);var n=e.rgbBlendState.blendMode!==t.rgbBlendState.blendMode||e.alphaBlendState.blendMode!==t.alphaBlendState.blendMode,i=e.rgbBlendState.blendSrcFactor!==t.rgbBlendState.blendSrcFactor||e.alphaBlendState.blendSrcFactor!==t.alphaBlendState.blendSrcFactor||e.rgbBlendState.blendDstFactor!==t.rgbBlendState.blendDstFactor||e.alphaBlendState.blendDstFactor!==t.alphaBlendState.blendDstFactor;(i||n)&&(tv(e.rgbBlendState)&&tv(e.alphaBlendState)?r.enable(r.BLEND):tv(t.rgbBlendState)&&tv(t.alphaBlendState)&&r.disable(r.BLEND)),n&&(r.blendEquationSeparate(t.rgbBlendState.blendMode,t.alphaBlendState.blendMode),e.rgbBlendState.blendMode=t.rgbBlendState.blendMode,e.alphaBlendState.blendMode=t.alphaBlendState.blendMode),i&&(r.blendFuncSeparate(t.rgbBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor,t.alphaBlendState.blendSrcFactor,t.alphaBlendState.blendDstFactor),e.rgbBlendState.blendSrcFactor=t.rgbBlendState.blendSrcFactor,e.alphaBlendState.blendSrcFactor=t.alphaBlendState.blendSrcFactor,e.rgbBlendState.blendDstFactor=t.rgbBlendState.blendDstFactor,e.alphaBlendState.blendDstFactor=t.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(e){var t=this.gl,r=this.currentMegaState;if(null!==this.OES_draw_buffers_indexed)for(var n=0;n<e.attachmentsState.length;n++)this.applyAttachmentStateIndexed(n,r.attachmentsState[0],e.attachmentsState[0]);else eg(1===e.attachmentsState.length),this.applyAttachmentState(r.attachmentsState[0],e.attachmentsState[0]);em(r.blendConstant,e.blendConstant)||(t.blendColor(e.blendConstant.r,e.blendConstant.g,e.blendConstant.b,e.blendConstant.a),eI(r.blendConstant,e.blendConstant)),r.depthCompare!==e.depthCompare&&(t.depthFunc(e.depthCompare),r.depthCompare=e.depthCompare),!!r.depthWrite!=!!e.depthWrite&&(t.depthMask(e.depthWrite),r.depthWrite=e.depthWrite),!!r.stencilWrite!=!!e.stencilWrite&&(t.stencilMask(e.stencilWrite?255:0),r.stencilWrite=e.stencilWrite);var i=!1;if(!eJ(r.stencilFront,e.stencilFront)){i=!0;var a=e.stencilFront,o=a.passOp,s=a.failOp,_=a.depthFailOp,E=a.compare;(r.stencilFront.passOp!==o||r.stencilFront.failOp!==s||r.stencilFront.depthFailOp!==_)&&(t.stencilOpSeparate(t.FRONT,s,_,o),r.stencilFront.passOp=o,r.stencilFront.failOp=s,r.stencilFront.depthFailOp=_),r.stencilFront.compare!==E&&(this.setStencilReference(0),r.stencilFront.compare=E)}if(!eJ(r.stencilBack,e.stencilBack)){i=!0;var u=e.stencilBack,o=u.passOp,s=u.failOp,_=u.depthFailOp,E=u.compare;(r.stencilBack.passOp!==o||r.stencilBack.failOp!==s||r.stencilBack.depthFailOp!==_)&&(t.stencilOpSeparate(t.BACK,s,_,o),r.stencilBack.passOp=o,r.stencilBack.failOp=s,r.stencilBack.depthFailOp=_),r.stencilBack.compare!==E&&(this.setStencilReference(0),r.stencilBack.compare=E)}(r.stencilFront.mask!==e.stencilFront.mask||r.stencilBack.mask!==e.stencilBack.mask)&&(i=!0,r.stencilFront.mask=e.stencilFront.mask,r.stencilBack.mask=e.stencilBack.mask),i&&this.applyStencil(),r.cullMode!==e.cullMode&&(r.cullMode===W.NONE?t.enable(t.CULL_FACE):e.cullMode===W.NONE&&t.disable(t.CULL_FACE),e.cullMode===W.BACK?t.cullFace(t.BACK):e.cullMode===W.FRONT?t.cullFace(t.FRONT):e.cullMode===W.FRONT_AND_BACK&&t.cullFace(t.FRONT_AND_BACK),r.cullMode=e.cullMode),r.frontFace!==e.frontFace&&(t.frontFace(e.frontFace),r.frontFace=e.frontFace),r.polygonOffset!==e.polygonOffset&&(e.polygonOffset?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),r.polygonOffset=e.polygonOffset),(r.polygonOffsetFactor!==e.polygonOffsetFactor||r.polygonOffsetUnits!==e.polygonOffsetUnits)&&(t.polygonOffset(e.polygonOffsetFactor,e.polygonOffsetUnits),r.polygonOffsetFactor=e.polygonOffsetFactor,r.polygonOffsetUnits=e.polygonOffsetUnits)},e.prototype.validatePipelineFormats=function(e){for(var t=0;t<this.currentColorAttachments.length;t++)if(null===this.currentColorAttachments[t])continue;this.currentDepthStencilAttachment&&eg(this.currentDepthStencilAttachment.format===e.depthStencilAttachmentFormat),-1!==this.currentSampleCount&&eg(this.currentSampleCount===e.sampleCount)},e.prototype.setPipeline=function(e){var t=this;if(this.renderBundle){this.renderBundle.push(function(){return t.setPipeline(e)});return}this.currentPipeline=e,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===eR.NeedsBind){var n=this.gl,i=r.gl_program,a=r.descriptor,o=tP(a.vertex.glsl,tz);if(tC(n))for(var s=0;s<o.length;s++){var _=(0,ep.CR)(o[s],2)[1],E=n.getUniformBlockIndex(i,_);-1!==E&&4294967295!==E&&n.uniformBlockBinding(i,E,s)}for(var u=tP(a.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),s=0;s<u.length;s++){var l=(0,ep.CR)(u[s],3),R=l[1],c=l[2],T=n.getUniformLocation(i,R);n.uniform1i(T,parseInt(c))}r.compileState=eR.ReadyToUse}},e.prototype.setVertexInput=function(e,t,r){var n,i,a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(e,t,r)});return}if(null!==e){eg(this.currentPipeline.inputLayout===e),this.bindVAO(e.vao);for(var s=this.gl,_=0;_<e.vertexBufferDescriptors.length;_++){var E=e.vertexBufferDescriptors[_],u=E.arrayStride,l=E.attributes;try{for(var R=(n=void 0,(0,ep.XA)(l)),c=R.next();!c.done;c=R.next()){var T=c.value,A=T.shaderLocation,d=T.offset,f=tC(s)?A:null===(a=e.program.attributes[A])||void 0===a?void 0:a.location;if(!(0,eA.Z)(f)){var p=t[_];if(null===p)continue;var h=T.vertexFormat;s.bindBuffer(s.ARRAY_BUFFER,tM(p.buffer));var S=(p.offset||0)+d;s.vertexAttribPointer(f,h.size,h.type,h.normalized,u,S)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}}if(eg(null!==r==(null!==e.indexBufferFormat)),null!==r){var N=r.buffer;eg(N.usage===z.INDEX),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,tM(N)),this.currentIndexBufferByteOffset=r.offset||0}else this.currentIndexBufferByteOffset=null}else eg(null===this.currentPipeline.inputLayout),eg(null===r),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(e){this.currentStencilRef!==e&&(this.currentStencilRef=e,this.applyStencil())},e.prototype.draw=function(e,t,r,n){var i,a=this;if(this.renderBundle){this.renderBundle.push(function(){return a.draw(e,t,r,n)});return}var o=this.gl,s=this.currentPipeline;if(t){var _=[s.drawMode,r||0,e,t];tC(o)?o.drawArraysInstanced.apply(o,(0,ep.ev)([],(0,ep.CR)(_),!1)):(i=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(i,(0,ep.ev)([],(0,ep.CR)(_),!1))}else o.drawArrays(s.drawMode,r,e);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(t,1))},e.prototype.drawIndexed=function(e,t,r,n,i){var a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.drawIndexed(e,t,r,n,i)});return}var s=this.gl,_=this.currentPipeline,E=eO(_.inputLayout),u=eO(this.currentIndexBufferByteOffset)+r*E.indexBufferCompByteSize;if(t){var l=[_.drawMode,e,E.indexBufferType,u,t];tC(s)?s.drawElementsInstanced.apply(s,(0,ep.ev)([],(0,ep.CR)(l),!1)):(a=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(a,(0,ep.ev)([],(0,ep.CR)(l),!1))}else s.drawElements(_.drawMode,e,E.indexBufferType,u);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(t,1))},e.prototype.drawIndirect=function(e,t){},e.prototype.drawIndexedIndirect=function(e,t){},e.prototype.beginOcclusionQuery=function(e){var t=this.gl;if(tC(t)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;t.beginQuery(r.gl_query_type,r.gl_query[e])}},e.prototype.endOcclusionQuery=function(){var e=this.gl;if(tC(e)){var t=this.currentRenderPassDescriptor.occlusionQueryPool;e.endQuery(t.gl_query_type)}},e.prototype.pipelineQueryReady=function(e){return this.queryProgramReady(e.program)},e.prototype.pipelineForceReady=function(e){},e.prototype.endPass=function(){for(var e=this.gl,t=tC(e),r=1===this.currentColorResolveTos.length&&this.currentColorResolveTos[0]===this.scTexture,n=!1,i=0;i<this.currentColorAttachments.length;i++){var a=this.currentColorAttachments[i];if(null!==a){var o=this.currentColorResolveTos[i],s=!1;null!==o&&(eg(a.width===o.width&&a.height===o.height),this.setScissorRectEnabled(!1),!r&&(t&&e.bindFramebuffer(e.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&t&&this.bindFramebufferAttachment(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,a,this.currentColorAttachmentLevels[i])),s=!0,!r&&(o===this.scTexture?e.bindFramebuffer(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,this.scPlatformFramebuffer):(e.bindFramebuffer(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&e.framebufferTexture2D(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o.gl_texture,this.currentColorResolveToLevels[i]))),r||(t?(e.blitFramebuffer(0,0,a.width,a.height,0,0,o.width,o.height,e.COLOR_BUFFER_BIT,e.LINEAR),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(a,o)),n=!0),this.currentRenderPassDescriptor.colorStore[i]||r||s||(e.bindFramebuffer(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,e.COLOR_ATTACHMENT0,a,this.currentColorAttachmentLevels[i])),r||e.bindFramebuffer(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var _=this.currentDepthStencilAttachment;if(_){var E=this.currentDepthStencilResolveTo,s=!1;E&&(eg(_.width===E.width&&_.height===E.height),this.setScissorRectEnabled(!1),!r&&(e.bindFramebuffer(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),e.bindFramebuffer(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,_),this.bindFramebufferDepthStencilAttachment(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,E))),s=!0,r||(t&&e.blitFramebuffer(0,0,_.width,_.height,0,0,E.width,E.height,e.DEPTH_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,null)),n=!0),r||this.currentRenderPassDescriptor.depthStencilStore||(s||(e.bindFramebuffer(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,_),s=!0),t&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[e.DEPTH_STENCIL_ATTACHMENT])),!r&&s&&e.bindFramebuffer(t?y.READ_FRAMEBUFFER:y.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}r||n||e.bindFramebuffer(t?y.DRAW_FRAMEBUFFER:y.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(e){if(this.currentScissorEnabled!==e){var t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.currentScissorEnabled=e}},e.prototype.applyStencil=function(){(0,eA.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(y.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(y.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(e){var t=e.gl_target,r=e.formatKind;if(t===y.TEXTURE_2D)return r===er.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(t===y.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(t===y.TEXTURE_3D)return this.fallbackTexture3D;if(t===y.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops")},e.prototype.submitBlitRenderPass=function(e,t){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:"layout(location = 0) in vec2 a_Position;\nout vec2 v_TexCoord;\nvoid main() {\n  v_TexCoord = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n\n  #ifdef VIEWPORT_ORIGIN_TL\n    v_TexCoord.y = 1.0 - v_TexCoord.y;\n  #endif\n}"},fragment:{glsl:"uniform sampler2D u_Texture;\nin vec2 v_TexCoord;\nout vec4 outputColor;\nvoid main() {\n  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);\n}"}}),this.blitVertexBuffer=this.createBuffer({usage:z.VERTEX|z.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:Q.VERTEX,attributes:[{format:eE.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Z.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[eE.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:ew(eH)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:e.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:e}));var r=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var n=this.createRenderPass({colorAttachment:[e],colorResolveTo:[t],colorClearColor:[eD]}),i=this.getCanvas(),a=i.width,o=i.height;n.setPipeline(this.blitRenderPipeline),n.setBindings(this.blitBindings),n.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),n.setViewport(0,0,a,o),this.gl.disable(this.gl.BLEND),n.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=r,this.inBlitRenderPass=!1},e}(),tQ=function(){function e(e){this.pluginOptions=e}return e.prototype.createSwapChain=function(e){return(0,ep.mG)(this,void 0,void 0,function(){var t,r,n,i,a,o,s,_,E,u,l,R,c;return(0,ep.Jh)(this,function(T){return r=(t=this.pluginOptions).targets,n=t.xrCompatible,a=void 0!==(i=t.antialias)&&i,s=void 0!==(o=t.preserveDrawingBuffer)&&o,E=void 0===(_=t.premultipliedAlpha)||_,u=t.shaderDebug,l=t.trackResources,R={antialias:a,preserveDrawingBuffer:s,stencil:!0,premultipliedAlpha:E,xrCompatible:n},this.handleContextEvents(e),r.includes("webgl2")&&(c=e.getContext("webgl2",R)||e.getContext("experimental-webgl2",R)),!c&&r.includes("webgl1")&&(c=e.getContext("webgl",R)||e.getContext("experimental-webgl",R)),[2,new tq(c,{shaderDebug:u,trackResources:l})]})})},e.prototype.handleContextEvents=function(e){var t=this.pluginOptions,r=t.onContextLost,n=t.onContextRestored,i=t.onContextCreationError;i&&e.addEventListener("webglcontextcreationerror",i,!1),r&&e.addEventListener("webglcontextlost",r,!1),n&&e.addEventListener("webglcontextrestored",n,!1)},e}();let tj="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&tj.decode();let tJ=null;function t$(){return(null===tJ||0===tJ.byteLength)&&(tJ=new Uint8Array(n.memory.buffer)),tJ}function t3(e,t){return e>>>=0,tj.decode(t$().subarray(e,e+t))}let t0=Array(128).fill(void 0);t0.push(void 0,null,!0,!1);let t1=t0.length,t2=0,t6="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},t8="function"==typeof t6.encodeInto?function(e,t){return t6.encodeInto(e,t)}:function(e,t){let r=t6.encode(e);return t.set(r),{read:e.length,written:r.length}};function t4(e,t,r){if(void 0===r){let r=t6.encode(e),n=t(r.length,1)>>>0;return t$().subarray(n,n+r.length).set(r),t2=r.length,n}let n=e.length,i=t(n,1)>>>0,a=t$(),o=0;for(;o<n;o++){let t=e.charCodeAt(o);if(t>127)break;a[i+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),i=r(i,n,n=o+3*e.length,1)>>>0;let t=t$().subarray(i+o,i+n),a=t8(e,t);o+=a.written}return t2=o,i}let t5=null;function t7(){return(null===t5||0===t5.byteLength)&&(t5=new Int32Array(n.memory.buffer)),t5}function t9(e,t,r){let i,a;try{let _=n.__wbindgen_add_to_stack_pointer(-16),E=t4(e,n.__wbindgen_malloc,n.__wbindgen_realloc),u=t2,l=t4(t,n.__wbindgen_malloc,n.__wbindgen_realloc),R=t2;n.glsl_compile(_,E,u,l,R,r);var o=t7()[_/4+0],s=t7()[_/4+1];return i=o,a=s,t3(o,s)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(i,a,1)}}class re{static __wrap(e){e>>>=0;let t=Object.create(re.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();n.__wbg_wgslcomposer_free(e)}constructor(){let e=n.wgslcomposer_new();return re.__wrap(e)}load_composable(e){let t=t4(e,n.__wbindgen_malloc,n.__wbindgen_realloc),r=t2;n.wgslcomposer_load_composable(this.__wbg_ptr,t,r)}wgsl_compile(e){let t,r;try{let o=n.__wbindgen_add_to_stack_pointer(-16),s=t4(e,n.__wbindgen_malloc,n.__wbindgen_realloc),_=t2;n.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,s,_);var i=t7()[o/4+0],a=t7()[o/4+1];return t=i,r=a,t3(i,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,r,1)}}}async function rt(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}async function rr(e){if(void 0!==n)return n;let t=function(){let e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(e,t){let r=t3(e,t);return function(e){t1===t0.length&&t0.push(t0.length+1);let t=t1;return t1=t0[t],t0[t]=e,t}(r)},e.wbg.__wbindgen_object_drop_ref=function(e){var t;t0[t=e],t<132||(t0[t]=t1,t1=t)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(t0[e])},e.wbg.__wbg_log_576ca876af0d4a77=function(e,t){console.log(t0[e],t0[t])},e.wbg.__wbindgen_throw=function(e,t){throw Error(t3(e,t))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:i}=await rt(await e,t);return n=r.exports,rr.__wbindgen_wasm_module=i,t5=null,tJ=null,n}function rn(e){if(e===eE.U8_R_NORM)return"r8unorm";if(e===eE.S8_R_NORM)return"r8snorm";if(e===eE.U8_RG_NORM)return"rg8unorm";if(e===eE.S8_RG_NORM)return"rg8snorm";if(e===eE.U32_R)return"r32uint";if(e===eE.S32_R)return"r32sint";if(e===eE.F32_R)return"r32float";else if(e===eE.U16_RG)return"rg16uint";else if(e===eE.S16_RG)return"rg16sint";else if(e===eE.F16_RG)return"rg16float";else if(e===eE.U8_RGBA_RT)return"bgra8unorm";else if(e===eE.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";else if(e===eE.U8_RGBA_NORM)return"rgba8unorm";else if(e===eE.U8_RGBA_SRGB)return"rgba8unorm-srgb";else if(e===eE.S8_RGBA_NORM)return"rgba8snorm";else if(e===eE.U32_RG)return"rg32uint";else if(e===eE.S32_RG)return"rg32sint";else if(e===eE.F32_RG)return"rg32float";else if(e===eE.U16_RGBA)return"rgba16uint";else if(e===eE.S16_RGBA)return"rgba16sint";else if(e===eE.F16_RGBA)return"rgba16float";else if(e===eE.F32_RGBA)return"rgba32float";else if(e===eE.U32_RGBA)return"rgba32uint";else if(e===eE.S32_RGBA)return"rgba32sint";else if(e===eE.D24)return"depth24plus";else if(e===eE.D24_S8)return"depth24plus-stencil8";else if(e===eE.D32F)return"depth32float";else if(e===eE.D32F_S8)return"depth32float-stencil8";else if(e===eE.BC1)return"bc1-rgba-unorm";else if(e===eE.BC1_SRGB)return"bc1-rgba-unorm-srgb";else if(e===eE.BC2)return"bc2-rgba-unorm";else if(e===eE.BC2_SRGB)return"bc2-rgba-unorm-srgb";else if(e===eE.BC3)return"bc3-rgba-unorm";else if(e===eE.BC3_SRGB)return"bc3-rgba-unorm-srgb";else if(e===eE.BC4_SNORM)return"bc4-r-snorm";else if(e===eE.BC4_UNORM)return"bc4-r-unorm";else if(e===eE.BC5_SNORM)return"bc5-rg-snorm";else if(e===eE.BC5_UNORM)return"bc5-rg-unorm";else throw"whoops"}function ri(e){if(e===k.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===k.REPEAT)return"repeat";if(e===k.MIRRORED_REPEAT)return"mirror-repeat";throw Error("whoops")}function ra(e){if(e===Y.BILINEAR)return"linear";if(e===Y.POINT)return"nearest";throw Error("whoops")}function ro(e){return e.gpuBuffer}function rs(e){if(e===H.ZERO)return"zero";if(e===H.ONE)return"one";if(e===H.SRC)return"src";if(e===H.ONE_MINUS_SRC)return"one-minus-src";if(e===H.DST)return"dst";if(e===H.ONE_MINUS_DST)return"one-minus-dst";if(e===H.SRC_ALPHA)return"src-alpha";else if(e===H.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";else if(e===H.DST_ALPHA)return"dst-alpha";else if(e===H.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";else if(e===H.CONST)return"constant";else if(e===H.ONE_MINUS_CONSTANT)return"one-minus-constant";else if(e===H.SRC_ALPHA_SATURATE)return"src-alpha-saturated";else throw Error("whoops")}function r_(e){return{operation:function(e){if(e===V.ADD)return"add";if(e===V.SUBSTRACT)return"subtract";if(e===V.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===V.MIN)return"min";if(e===V.MAX)return"max";throw Error("whoops")}(e.blendMode),srcFactor:rs(e.blendSrcFactor),dstFactor:rs(e.blendDstFactor)}}function rE(e){return e.blendMode===V.ADD&&e.blendSrcFactor===H.ONE&&e.blendDstFactor===H.ZERO}function ru(e){if(e===X.NEVER)return"never";if(e===X.LESS)return"less";if(e===X.EQUAL)return"equal";if(e===X.LEQUAL)return"less-equal";if(e===X.GREATER)return"greater";if(e===X.NOTEQUAL)return"not-equal";if(e===X.GEQUAL)return"greater-equal";else if(e===X.ALWAYS)return"always";else throw Error("whoops")}function rl(e){if(e===et.KEEP)return"keep";if(e===et.REPLACE)return"replace";if(e===et.ZERO)return"zero";if(e===et.DECREMENT_CLAMP)return"decrement-clamp";if(e===et.DECREMENT_WRAP)return"decrement-wrap";if(e===et.INCREMENT_CLAMP)return"increment-clamp";if(e===et.INCREMENT_WRAP)return"increment-wrap";else if(e===et.INVERT)return"invert";else throw Error("whoops")}function rR(e,t,r,n){switch(void 0===r&&(r=!1),e){case eE.S8_R:case eE.S8_R_NORM:case eE.S8_RG_NORM:case eE.S8_RGB_NORM:case eE.S8_RGBA_NORM:var i=(ArrayBuffer,new Int8Array(t));return n&&i.set(new Int8Array(n)),i;case eE.U8_R:case eE.U8_R_NORM:case eE.U8_RG:case eE.U8_RG_NORM:case eE.U8_RGB:case eE.U8_RGB_NORM:case eE.U8_RGB_SRGB:case eE.U8_RGBA:case eE.U8_RGBA_NORM:case eE.U8_RGBA_SRGB:var a=(ArrayBuffer,new Uint8Array(t));return n&&a.set(new Uint8Array(n)),a;case eE.S16_R:case eE.S16_RG:case eE.S16_RG_NORM:case eE.S16_RGB_NORM:case eE.S16_RGBA:case eE.S16_RGBA_NORM:var o=new Int16Array(t instanceof ArrayBuffer?t:r?t/2:t);return n&&o.set(new Int16Array(n)),o;case eE.U16_R:case eE.U16_RGB:case eE.U16_RGBA_5551:case eE.U16_RGBA_NORM:case eE.U16_RG_NORM:case eE.U16_R_NORM:var s=new Uint16Array(t instanceof ArrayBuffer?t:r?t/2:t);return n&&s.set(new Uint16Array(n)),s;case eE.S32_R:var _=new Int32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&_.set(new Int32Array(n)),_;case eE.U32_R:case eE.U32_RG:var E=new Uint32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&E.set(new Uint32Array(n)),E;case eE.F32_R:case eE.F32_RG:case eE.F32_RGB:case eE.F32_RGBA:var u=new Float32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&u.set(new Float32Array(n)),u}var l=(ArrayBuffer,new Uint8Array(t));return n&&l.set(new Uint8Array(n)),l}function rc(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":case"depth16unorm":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":case"depth32float":default:return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw Error("No fixed size for Stencil8 format!");case"depth24plus":throw Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8}}}(G=ec||(ec={}))[G.COPY_SRC=1]="COPY_SRC",G[G.COPY_DST=2]="COPY_DST",G[G.TEXTURE_BINDING=4]="TEXTURE_BINDING",G[G.STORAGE_BINDING=8]="STORAGE_BINDING",G[G.STORAGE=8]="STORAGE",G[G.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT",(b=eT||(eT={}))[b.READ=1]="READ",b[b.WRITE=2]="WRITE";var rT=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this)||this;return i.id=r,i.device=n,i}return(0,ep.ZT)(t,e),t.prototype.destroy=function(){},t}(eh.Z),rA=function(e){function t(t){var r,n,i=t.id,a=t.device,o=t.descriptor,s=e.call(this,{id:i,device:a})||this;s.type=x.Bindings;var _=o.pipeline;eg(!!_);var E=o.uniformBufferBindings,u=o.storageBufferBindings,l=o.samplerBindings,R=o.storageTextureBindings;s.numUniformBuffers=(null==E?void 0:E.length)||0;var c=[[],[],[],[]],T=0;if(E&&E.length)for(var A=0;A<E.length;A++){var d=o.uniformBufferBindings[A],f=d.binding,p=d.size,h=d.offset,S=d.buffer,N={buffer:ro(S),offset:null!=h?h:0,size:p};c[0].push({binding:null!=f?f:T++,resource:N})}if(l&&l.length){T=0;for(var A=0;A<l.length;A++){var B=(0,ep.pi)((0,ep.pi)({},l[A]),eV),f=o.samplerBindings[A],C=null!==f.texture?f.texture:s.device.getFallbackTexture(B);B.dimension=C.dimension,B.formatKind=eF(C.format);var F=C.gpuTextureView;if(c[1].push({binding:null!==(r=f.textureBinding)&&void 0!==r?r:T++,resource:F}),-1!==f.samplerBinding){var g=(null!==f.sampler?f.sampler:s.device.getFallbackSampler(B)).gpuSampler;c[1].push({binding:null!==(n=f.samplerBinding)&&void 0!==n?n:T++,resource:g})}}}if(u&&u.length){T=0;for(var A=0;A<u.length;A++){var O=o.storageBufferBindings[A],f=O.binding,p=O.size,h=O.offset,S=O.buffer,N={buffer:ro(S),offset:null!=h?h:0,size:p};c[2].push({binding:null!=f?f:T++,resource:N})}}if(R&&R.length){T=0;for(var A=0;A<R.length;A++){var m=o.storageTextureBindings[A],f=m.binding,C=m.texture,F=C.gpuTextureView;c[3].push({binding:null!=f?f:T++,resource:F})}}var I=c.findLastIndex(function(e){return!!e.length});return s.gpuBindGroup=c.map(function(e,t){return t<=I&&s.device.device.createBindGroup({layout:_.getBindGroupLayout(t),entries:e})}),s}return(0,ep.ZT)(t,e),t}(rT),rd=function(e){function t(t){var r,n=t.id,i=t.device,a=t.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=x.Buffer;var s=a.usage,_=a.viewOrSize,E=!!(s&z.MAP_READ);o.usage=(r=0,s&z.INDEX&&(r|=GPUBufferUsage.INDEX),s&z.VERTEX&&(r|=GPUBufferUsage.VERTEX),s&z.UNIFORM&&(r|=GPUBufferUsage.UNIFORM),s&z.STORAGE&&(r|=GPUBufferUsage.STORAGE),s&z.COPY_SRC&&(r|=GPUBufferUsage.COPY_SRC),s&z.INDIRECT&&(r|=GPUBufferUsage.INDIRECT),r|=GPUBufferUsage.COPY_DST),E&&(o.usage=z.MAP_READ|z.COPY_DST);var u=!(0,ed.Z)(_);return o.view=(0,ed.Z)(_)?null:_,o.size=(0,ed.Z)(_)?eG(_,4):eG(_.byteLength,4),(0,ed.Z)(_)?o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!!E&&u}):(o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!0}),new(_&&_.constructor||Float32Array)(o.gpuBuffer.getMappedRange()).set(_),o.gpuBuffer.unmap()),o}return(0,ep.ZT)(t,e),t.prototype.setSubData=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=this.gpuBuffer;n=Math.min(n=n||t.byteLength,this.size-e);var a=t.byteOffset+r,o=a+n,s=n+3&-4;if(s!==n){var _=new Uint8Array(t.buffer.slice(a,o));(t=new Uint8Array(s)).set(_),r=0,a=0,o=s,n=s}for(var E=0;o-(a+E)>15728640;)this.device.device.queue.writeBuffer(i,e+E,t.buffer,a+E,15728640),E+=15728640;this.device.device.queue.writeBuffer(i,e+E,t.buffer,a+E,n-E)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},t}(rT),rf=function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(e,t,r){this.gpuComputePassEncoder.dispatchWorkgroups(e,t,r)},e.prototype.dispatchWorkgroupsIndirect=function(e,t){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(e.gpuBuffer,t)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(e){eg(null===this.gpuComputePassEncoder),this.frameCommandEncoder=e,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(e){var t=eO(e.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(t)},e.prototype.setBindings=function(e){var t=this;e.gpuBindGroup.forEach(function(r,n){r&&t.gpuComputePassEncoder.setBindGroup(n,e.gpuBindGroup[n])})},e.prototype.pushDebugGroup=function(e){this.gpuComputePassEncoder.pushDebugGroup(e)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(e){this.gpuComputePassEncoder.insertDebugMarker(e)},e}(),rp=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;a.type=x.ComputePipeline,a.gpuComputePipeline=null,a.descriptor=i;var o=i.program.computeStage;if(null===o)return a;var s={layout:"auto",compute:(0,ep.pi)({},o)};return a.gpuComputePipeline=a.device.device.createComputePipeline(s),void 0!==a.name&&(a.gpuComputePipeline.label=a.name),a}return(0,ep.ZT)(t,e),t.prototype.getBindGroupLayout=function(e){return this.gpuComputePipeline.getBindGroupLayout(e)},t}(rT),rh=function(e){function t(t){var r,n,i,a,o=t.id,s=t.device,_=t.descriptor,E=e.call(this,{id:o,device:s})||this;E.type=x.InputLayout;var u=[];try{for(var l=(0,ep.XA)(_.vertexBufferDescriptors),R=l.next();!R.done;R=l.next()){var c=R.value,T=c.arrayStride,A=c.stepMode,d=c.attributes;u.push({arrayStride:T,stepMode:function(e){if(e===Q.VERTEX)return"vertex";if(e===Q.INSTANCE)return"instance";throw Error("whoops")}(A),attributes:[]});try{for(var f=(i=void 0,(0,ep.XA)(d)),p=f.next();!p.done;p=f.next()){var h=p.value,S=h.shaderLocation,N=h.format,B=h.offset;u[u.length-1].attributes.push({shaderLocation:S,format:function(e){if(e===eE.U8_R||e===eE.U8_RG)return"uint8x2";if(e===eE.U8_RGB||e===eE.U8_RGBA)return"uint8x4";if(e===eE.U8_RG_NORM)return"unorm8x2";if(e===eE.U8_RGBA_NORM)return"unorm8x4";if(e===eE.S8_RGB_NORM)return"snorm8x4";else if(e===eE.S8_RGBA_NORM)return"snorm8x4";else if(e===eE.U16_RG_NORM)return"unorm16x2";else if(e===eE.U16_RGBA_NORM)return"unorm16x4";else if(e===eE.S16_RG_NORM)return"snorm16x2";else if(e===eE.S16_RGBA_NORM)return"snorm16x4";else if(e===eE.S16_RG)return"uint16x2";else if(e===eE.F16_RG)return"float16x2";else if(e===eE.F16_RGBA)return"float16x4";else if(e===eE.F32_R)return"float32";else if(e===eE.F32_RG)return"float32x2";else if(e===eE.F32_RGB)return"float32x3";else if(e===eE.F32_RGBA)return"float32x4";else throw"whoops"}(N),offset:B})}}catch(e){i={error:e}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{R&&!R.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return E.indexFormat=function(e){if(null!==e){if(e===eE.U16_R)return"uint16";if(e===eE.U32_R)return"uint32";throw Error("whoops")}}(_.indexBufferFormat),E.buffers=u,E}return(0,ep.ZT)(t,e),t}(rT),rS=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;return a.type=x.Program,a.vertexStage=null,a.fragmentStage=null,a.computeStage=null,a.descriptor=i,i.vertex&&(a.vertexStage=a.createShaderStage(i.vertex,"vertex")),i.fragment&&(a.fragmentStage=a.createShaderStage(i.fragment,"fragment")),i.compute&&(a.computeStage=a.createShaderStage(i.compute,"compute")),a}return(0,ep.ZT)(t,e),t.prototype.setUniformsLegacy=function(e){},t.prototype.createShaderStage=function(e,t){var r,n,i=e.glsl,a=e.wgsl,o=e.entryPoint,s=e.postprocess,_=a;if(!_)try{_=this.device.glsl_compile(i,t,!1)}catch(e){throw console.error(e,i),Error("whoops")}var E=function(e){if(!_.includes(e))return"continue";_=(_=_.replace("var T_".concat(e,": texture_2d<f32>;"),"var T_".concat(e,": texture_depth_2d;"))).replace(RegExp("textureSample\\(T_".concat(e,"(.*)\\);$"),"gm"),function(t,r){return"vec4<f32>(textureSample(T_".concat(e).concat(r,"), 0.0, 0.0, 0.0);")})};try{for(var u=(0,ep.XA)(["u_TextureFramebufferDepth"]),l=u.next();!l.done;l=u.next()){var R=l.value;E(R)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return s&&(_=s(_)),{module:this.device.device.createShaderModule({code:_}),entryPoint:o||"main"}},t}(rT),rN=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;a.type=x.QueryPool;var o=i.elemCount,s=i.type;return a.querySet=a.device.device.createQuerySet({type:function(e){if(e===ea.OcclusionConservative)return"occlusion";throw Error("whoops")}(s),count:o}),a.resolveBuffer=a.device.device.createBuffer({size:8*o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),a.cpuBuffer=a.device.device.createBuffer({size:8*o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),a.results=null,a}return(0,ep.ZT)(t,e),t.prototype.queryResultOcclusion=function(e){return null===this.results?null:this.results[e]!==BigInt(0)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},t}(rT),rB=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=x.Readback,i}return(0,ep.ZT)(t,e),t.prototype.readTexture=function(e,t,r,n,i,a,o,s){return void 0===o&&(o=0),(0,ep.mG)(this,void 0,void 0,function(){var s,_,E,u,l,R,c;return(0,ep.Jh)(this,function(T){return l=(u=256*Math.ceil((E=Math.ceil(n/(_=rc((s=e).gpuTextureformat)).width)*_.length)/256))*i,R=this.device.createBuffer({usage:z.STORAGE|z.MAP_READ|z.COPY_DST,hint:q.STATIC,viewOrSize:l}),(c=this.device.device.createCommandEncoder()).copyTextureToBuffer({texture:s.gpuTexture,mipLevel:0,origin:{x:t,y:r,z:0}},{buffer:R.gpuBuffer,offset:0,bytesPerRow:u},{width:n,height:i,depthOrArrayLayers:1}),this.device.device.queue.submit([c.finish()]),[2,this.readBuffer(R,0,a.byteLength===l?a:null,o,l,s.format,!0,!1,E,u,i)]})})},t.prototype.readTextureSync=function(e,t,r,n,i,a,o,s){throw Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},t.prototype.readBuffer=function(e,t,r,n,i,a,o,s,_,E,u){var l=this;void 0===t&&(t=0),void 0===r&&(r=null),void 0===i&&(i=0),void 0===a&&(a=eE.U8_RGB),void 0===o&&(o=!1),void 0===_&&(_=0),void 0===E&&(E=0),void 0===u&&(u=0);var R=i||e.size,c=r||e.view,T=c&&c.constructor&&c.constructor.BYTES_PER_ELEMENT||eC(eB(a)),A=e;if(!(e.usage&z.MAP_READ&&e.usage&z.COPY_DST)){var d=this.device.device.createCommandEncoder();A=this.device.createBuffer({usage:z.STORAGE|z.MAP_READ|z.COPY_DST,hint:q.STATIC,viewOrSize:R}),d.copyBufferToBuffer(e.gpuBuffer,t,A.gpuBuffer,0,R),this.device.device.queue.submit([d.finish()])}return new Promise(function(e,r){A.gpuBuffer.mapAsync(eT.READ,t,R).then(function(){var r=A.gpuBuffer.getMappedRange(t,R),n=c;if(o)n=null===n?rR(a,R,!0,r):rR(a,n.buffer,void 0,r);else if(null===n)switch(T){case 1:(n=new Uint8Array(R)).set(new Uint8Array(r));break;case 2:n=l.getHalfFloatAsFloatRGBAArrayBuffer(R/2,r);break;case 4:(n=new Float32Array(R/4)).set(new Float32Array(r))}else switch(T){case 1:(n=new Uint8Array(n.buffer)).set(new Uint8Array(r));break;case 2:n=l.getHalfFloatAsFloatRGBAArrayBuffer(R/2,r,c);break;case 4:var i=c&&c.constructor||Float32Array;(n=new i(n.buffer)).set(new i(r))}if(_!==E){1!==T||o||(_*=2,E*=2);for(var s=new Uint8Array(n.buffer),d=_,f=0,p=1;p<u;++p){f=p*E;for(var h=0;h<_;++h)s[d++]=s[f++]}n=0===T||o?new Uint8Array(s.buffer,0,d):new Float32Array(s.buffer,0,d/4)}A.gpuBuffer.unmap(),e(n)},function(e){return r(e)})})},t.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(e,t,r){r||(r=new Float32Array(e));for(var n=new Uint16Array(t);e--;)r[e]=function(e){var t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*6103515625e-14*(n/1024):31==r?n?NaN:(t?-1:1)*(1/0):(t?-1:1)*Math.pow(2,r-15)*(1+n/1024)}(n[e]);return r},t}(rT),rC=function(){function e(e){this.device=e,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var e;return(null===(e=this.renderBundle)||void 0===e?void 0:e.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(e,t){return(eg(t<e.mipLevelCount),1===e.mipLevelCount)?e.gpuTextureView:e.gpuTexture.createView({baseMipLevel:t,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(e){this.descriptor=e,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var t,r,n,i,a,o,s=e.colorAttachment.length;this.gfxColorAttachment.length=s,this.gfxColorResolveTo.length=s;for(var _=0;_<e.colorAttachment.length;_++){var E=e.colorAttachment[_],u=e.colorResolveTo[_];if(null===E&&null!==u&&(E=u,u=null),this.gfxColorAttachment[_]=E,this.gfxColorResolveTo[_]=u,this.gfxColorAttachmentLevel[_]=(null===(t=e.colorAttachmentLevel)||void 0===t?void 0:t[_])||0,this.gfxColorResolveToLevel[_]=(null===(r=e.colorResolveToLevel)||void 0===r?void 0:r[_])||0,null!==E){void 0===this.gpuColorAttachments[_]&&(this.gpuColorAttachments[_]={});var l=this.gpuColorAttachments[_];l.view=this.getTextureView(E,(null===(n=this.gfxColorAttachmentLevel)||void 0===n?void 0:n[_])||0);var R=null!==(a=null===(i=e.colorClearColor)||void 0===i?void 0:i[_])&&void 0!==a?a:"load";"load"===R?l.loadOp="load":(l.loadOp="clear",l.clearValue=R),l.storeOp=(null===(o=e.colorStore)||void 0===o?void 0:o[_])?"store":"discard",l.resolveTarget=void 0,null!==u&&(E.sampleCount>1?l.resolveTarget=this.getTextureView(u,this.gfxColorResolveToLevel[_]):l.storeOp="store")}else{this.gpuColorAttachments.length=_,this.gfxColorAttachment.length=_,this.gfxColorResolveTo.length=_;break}}if(this.gfxDepthStencilAttachment=e.depthStencilAttachment,this.gfxDepthStencilResolveTo=e.depthStencilResolveTo,e.depthStencilAttachment){var c=e.depthStencilAttachment,l=this.gpuDepthStencilAttachment;l.view=c.gpuTextureView,255&c.format&e_.Depth?("load"===e.depthClearValue?l.depthLoadOp="load":(l.depthLoadOp="clear",l.depthClearValue=e.depthClearValue),e.depthStencilStore||null!==this.gfxDepthStencilResolveTo?l.depthStoreOp="store":l.depthStoreOp="discard"):(l.depthLoadOp=void 0,l.depthStoreOp=void 0),255&c.format&e_.Stencil?("load"===e.stencilClearValue?l.stencilLoadOp="load":(l.stencilLoadOp="clear",l.stencilClearValue=e.stencilClearValue),e.depthStencilStore||null!==this.gfxDepthStencilResolveTo?l.stencilStoreOp="store":l.stencilStoreOp="discard"):(l.stencilLoadOp=void 0,l.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,eA.Z)(e.occlusionQueryPool)?void 0:e.occlusionQueryPool.querySet},e.prototype.beginRenderPass=function(e,t){eg(null===this.gpuRenderPassEncoder),this.setRenderPassDescriptor(t),this.frameCommandEncoder=e,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(e,t){return this.device.swapChainHeight-e-t},e.prototype.setViewport=function(e,t,r,n,i,a){void 0===i&&(i=0),void 0===a&&(a=1),this.gpuRenderPassEncoder.setViewport(e,this.flipY(t,n),r,n,i,a)},e.prototype.setScissorRect=function(e,t,r,n){this.gpuRenderPassEncoder.setScissorRect(e,this.flipY(t,n),r,n)},e.prototype.setPipeline=function(e){var t=eO(e.gpuRenderPipeline);this.getEncoder().setPipeline(t)},e.prototype.setVertexInput=function(e,t,r){if(null!==e){var n=this.getEncoder();null!==r&&n.setIndexBuffer(ro(r.buffer),eO(e.indexFormat),r.offset);for(var i=0;i<t.length;i++){var a=t[i];null!==a&&n.setVertexBuffer(i,ro(a.buffer),a.offset)}}},e.prototype.setBindings=function(e){var t=this.getEncoder();e.gpuBindGroup.forEach(function(r,n){r&&t.setBindGroup(n,e.gpuBindGroup[n])})},e.prototype.setStencilReference=function(e){this.gpuRenderPassEncoder.setStencilReference(e)},e.prototype.draw=function(e,t,r,n){this.getEncoder().draw(e,t,r,n)},e.prototype.drawIndexed=function(e,t,r,n,i){this.getEncoder().drawIndexed(e,t,r,n,i)},e.prototype.drawIndirect=function(e,t){this.getEncoder().drawIndirect(ro(e),t)},e.prototype.drawIndexedIndirect=function(e,t){this.getEncoder().drawIndexedIndirect(ro(e),t)},e.prototype.beginOcclusionQuery=function(e){this.gpuRenderPassEncoder.beginOcclusionQuery(e)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(e){this.gpuRenderPassEncoder.pushDebugGroup(e)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(e){this.gpuRenderPassEncoder.insertDebugMarker(e)},e.prototype.beginBundle=function(e){this.renderBundle=e},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(e){this.gpuRenderPassEncoder.executeBundles(e.map(function(e){return e.renderBundle}))},e.prototype.finish=function(){var e;null===(e=this.gpuRenderPassEncoder)||void 0===e||e.end(),this.gpuRenderPassEncoder=null;for(var t=0;t<this.gfxColorAttachment.length;t++){var r=this.gfxColorAttachment[t],n=this.gfxColorResolveTo[t];null!==r&&null!==n&&1===r.sampleCount&&this.copyAttachment(n,this.gfxColorAttachmentLevel[t],r,this.gfxColorResolveToLevel[t])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(e,t,r,n){eg(1===r.sampleCount);var i={texture:r.gpuTexture,mipLevel:n},a={texture:e.gpuTexture,mipLevel:t};eg(r.width>>>n==e.width>>>t),eg(r.height>>>n==e.height>>>t),eg(!!(r.usage&ec.COPY_SRC)),eg(!!(e.usage&ec.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(i,a,[e.width,e.height,1])},e}(),rF=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=e.call(this,{id:r,device:n})||this;return a.type=x.RenderPipeline,a.isCreatingAsync=!1,a.gpuRenderPipeline=null,a.descriptor=i,a.device.createRenderPipelineInternal(a,!1),a}return(0,ep.ZT)(t,e),t.prototype.getBindGroupLayout=function(e){return this.gpuRenderPipeline.getBindGroupLayout(e)},t}(rT),rg=function(e){function t(t){var r,n,i=t.id,a=t.device,o=t.descriptor,s=e.call(this,{id:i,device:a})||this;s.type=x.Sampler;var _=o.lodMinClamp,E=o.mipmapFilter===K.NO_MIP?o.lodMinClamp:o.lodMaxClamp,u=null!==(r=o.maxAnisotropy)&&void 0!==r?r:1;return u>1&&eg(o.minFilter===Y.BILINEAR&&o.magFilter===Y.BILINEAR&&o.mipmapFilter===K.LINEAR),s.gpuSampler=s.device.device.createSampler({addressModeU:ri(o.addressModeU),addressModeV:ri(o.addressModeV),addressModeW:ri(null!==(n=o.addressModeW)&&void 0!==n?n:o.addressModeU),lodMinClamp:_,lodMaxClamp:E,minFilter:ra(o.minFilter),magFilter:ra(o.magFilter),mipmapFilter:function(e){if(e===K.LINEAR)return"linear";if(e===K.NEAREST||e===K.NO_MIP)return"nearest";throw Error("whoops")}(o.mipmapFilter),compare:void 0!==o.compareFunction?ru(o.compareFunction):void 0,maxAnisotropy:u}),s}return(0,ep.ZT)(t,e),t}(rT),rO=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,a=t.skipCreate,o=t.sampleCount,s=e.call(this,{id:r,device:n})||this;s.type=x.Texture,s.flipY=!1;var _=i.format,E=i.dimension,u=i.width,l=i.height,R=i.depthOrArrayLayers,c=i.mipLevelCount,T=i.usage,A=i.pixelStore;return s.flipY=!!(null==A?void 0:A.unpackFlipY),s.device.createTextureShared({format:_,dimension:null!=E?E:J.TEXTURE_2D,width:u,height:l,depthOrArrayLayers:null!=R?R:1,mipLevelCount:null!=c?c:1,usage:T,sampleCount:null!=o?o:1},s,a),s}return(0,ep.ZT)(t,e),t.prototype.textureFromImageBitmapOrCanvas=function(e,t,r){for(var n=t[0].width,i=t[0].height,a={size:{width:n,height:i,depthOrArrayLayers:r},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},o=e.createTexture(a),s=0;s<t.length;s++)e.queue.copyExternalImageToTexture({source:t[s],flipY:this.flipY},{texture:o,origin:[0,0,s]},[n,i]);return[o,n,i]},t.prototype.isImageBitmapOrCanvases=function(e){var t=e[0];return t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas},t.prototype.isVideo=function(e){return e[0]instanceof HTMLVideoElement},t.prototype.setImageData=function(e,t){var r,n,i,a,o=this,s=this.device.device;if(this.isImageBitmapOrCanvases(e))n=(r=(0,ep.CR)(this.textureFromImageBitmapOrCanvas(s,e,this.depthOrArrayLayers),3))[0],i=r[1],a=r[2];else if(this.isVideo(e))n=s.importExternalTexture({source:e[0]});else{var _=rc(this.gpuTextureformat),E=Math.ceil(this.width/_.width)*_.length;e.forEach(function(e){s.queue.writeTexture({texture:o.gpuTexture},e,{bytesPerRow:E},{width:o.width,height:o.height})})}this.width=i,this.height=a,n&&(this.gpuTexture=n),this.gpuTextureView=this.gpuTexture.createView({dimension:function(e){if(e===J.TEXTURE_2D)return"2d";if(e===J.TEXTURE_CUBE_MAP)return"cube";if(e===J.TEXTURE_2D_ARRAY)return"2d-array";if(e===J.TEXTURE_3D)return"3d";throw Error("whoops")}(this.dimension)})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},t}(rT),rm=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=x.RenderBundle,i.renderBundleEncoder=i.device.device.createRenderBundleEncoder({colorFormats:[i.device.swapChainFormat]}),i}return(0,ep.ZT)(t,e),t.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},t}(rT),rI=function(){function e(e,t,r,n,i,a){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=ec.RENDER_ATTACHMENT|ec.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=en.UPPER_LEFT,this.clipSpaceNearZ=ei.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=t,this.canvas=r,this.canvasContext=n,this.glsl_compile=i,this.WGSLComposer=a,this.fallbackTexture2D=this.createFallbackTexture(J.TEXTURE_2D,er.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(J.TEXTURE_2D,er.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(J.TEXTURE_2D_ARRAY,er.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(J.TEXTURE_3D,er.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(J.TEXTURE_CUBE_MAP,er.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:k.REPEAT,addressModeV:k.REPEAT,minFilter:Y.POINT,magFilter:Y.POINT,mipmapFilter:K.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:k.REPEAT,addressModeV:k.REPEAT,minFilter:Y.POINT,magFilter:Y.POINT,mipmapFilter:K.NEAREST,compareFunction:X.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(e){console.error(e.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(e,t){(this.swapChainWidth!==e||this.swapChainHeight!==t)&&(this.swapChainWidth=e,this.swapChainHeight=t)},e.prototype.getOnscreenTexture=function(){var e=this.canvasContext.getCurrentTexture(),t=e.createView(),r=new rO({id:0,device:this,descriptor:{format:eE.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:J.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return r.depthOrArrayLayers=1,r.sampleCount=1,r.gpuTexture=e,r.gpuTextureView=t,r.name="Onscreen",this.setResourceName(r,"Onscreen Texture"),r},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){eg(0===this.frameCommandEncoderPool.length)},e.prototype.endFrame=function(){eg(this.frameCommandEncoderPool.every(function(e){return null!==e})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(e){return e.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(e){return new rd({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTexture=function(e){return new rO({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createSampler=function(e){return new rg({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTarget=function(e){var t=new rO({id:this.getNextUniqueId(),device:this,descriptor:(0,ep.pi)((0,ep.pi)({},e),{dimension:J.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:$.RENDER_TARGET}),sampleCount:e.sampleCount});return t.depthOrArrayLayers=1,t.type=x.RenderTarget,t},e.prototype.createRenderTargetFromTexture=function(e){var t=e.format,r=e.width,n=e.height,i=e.depthOrArrayLayers,a=e.sampleCount,o=e.mipLevelCount,s=e.gpuTexture,_=e.gpuTextureView,E=e.usage;eg(!!(E&ec.RENDER_ATTACHMENT));var u=new rO({id:this.getNextUniqueId(),device:this,descriptor:{format:t,width:r,height:n,depthOrArrayLayers:i,dimension:J.TEXTURE_2D,mipLevelCount:o,usage:E},skipCreate:!0});return u.depthOrArrayLayers=i,u.sampleCount=a,u.gpuTexture=s,u.gpuTextureView=_,u},e.prototype.createProgram=function(e){var t,r;return(null===(t=e.vertex)||void 0===t?void 0:t.glsl)&&(e.vertex.glsl=tS(this.queryVendorInfo(),"vert",e.vertex.glsl)),(null===(r=e.fragment)||void 0===r?void 0:r.glsl)&&(e.fragment.glsl=tS(this.queryVendorInfo(),"frag",e.fragment.glsl)),new rS({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createProgramSimple=function(e){return new rS({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTextureShared=function(e,t,r){var n,i,a={width:e.width,height:e.height,depthOrArrayLayers:e.depthOrArrayLayers},o=e.mipLevelCount,s=rn(e.format),_=function(e){if(e===J.TEXTURE_2D||e===J.TEXTURE_CUBE_MAP||e===J.TEXTURE_2D_ARRAY)return"2d";if(e===J.TEXTURE_3D)return"3d";throw Error("whoops")}(e.dimension),E=(n=e.usage,i=0,n&$.SAMPLED&&(i|=ec.TEXTURE_BINDING|ec.COPY_DST|ec.COPY_SRC),n&$.STORAGE&&(i|=ec.TEXTURE_BINDING|ec.STORAGE_BINDING|ec.COPY_SRC|ec.COPY_DST),n&$.RENDER_TARGET&&(i|=ec.RENDER_ATTACHMENT|ec.TEXTURE_BINDING|ec.COPY_SRC|ec.COPY_DST),i);if(t.gpuTextureformat=s,t.dimension=e.dimension,t.format=e.format,t.width=e.width,t.height=e.height,t.depthOrArrayLayers=e.depthOrArrayLayers,t.mipLevelCount=o,t.usage=E,t.sampleCount=e.sampleCount,!r){var u=this.device.createTexture({size:a,mipLevelCount:o,format:s,dimension:_,sampleCount:e.sampleCount,usage:E}),l=u.createView();t.gpuTexture=u,t.gpuTextureView=l}},e.prototype.getFallbackSampler=function(e){return e.formatKind===er.Depth&&e.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(e){var t=e.dimension,r=e.formatKind;if(t===J.TEXTURE_2D)return r===er.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(t===J.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(t===J.TEXTURE_3D)return this.fallbackTexture3D;if(t===J.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops")},e.prototype.createFallbackTexture=function(e,t){var r=e===J.TEXTURE_CUBE_MAP?6:1,n=t===er.Float?eE.U8_RGBA_NORM:eE.D24;return this.createTexture({dimension:e,format:n,usage:$.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1})},e.prototype.createBindings=function(e){return new rA({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createInputLayout=function(e){return new rh({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createComputePipeline=function(e){return new rp({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderPipeline=function(e){return new rF({id:this.getNextUniqueId(),device:this,descriptor:(0,ep.pi)({},e)})},e.prototype.createQueryPool=function(e,t){return new rN({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:t}})},e.prototype.createRenderPipelineInternal=function(e,t){if(null===e.gpuRenderPipeline){var r,n=e.descriptor,i=n.program,a=i.vertexStage,o=i.fragmentStage;if(null!==a&&null!==o){var s,_,E,u=n.megaStateDescriptor||{},l=u.stencilBack,R=u.stencilFront,c=(0,ep._T)(u,["stencilBack","stencilFront"]),T=ew(eH);n.megaStateDescriptor=(0,ep.pi)((0,ep.pi)((0,ep.pi)({},T),{stencilBack:(0,ep.pi)((0,ep.pi)({},T.stencilBack),l),stencilFront:(0,ep.pi)((0,ep.pi)({},T.stencilFront),R)}),c);var A=n.megaStateDescriptor.attachmentsState[0];n.colorAttachmentFormats.forEach(function(e,t){n.megaStateDescriptor.attachmentsState[t]||(n.megaStateDescriptor.attachmentsState[t]=ex(void 0,A))});var d=(s=null!==(r=n.topology)&&void 0!==r?r:Z.TRIANGLES,_=n.megaStateDescriptor,{topology:function(e){switch(e){case Z.TRIANGLES:return"triangle-list";case Z.POINTS:return"point-list";case Z.TRIANGLE_STRIP:return"triangle-strip";case Z.LINES:return"line-list";case Z.LINE_STRIP:return"line-strip";default:throw Error("Unknown primitive topology mode")}}(s),cullMode:function(e){if(e===W.NONE)return"none";if(e===W.FRONT)return"front";if(e===W.BACK)return"back";throw Error("whoops")}(_.cullMode),frontFace:function(e){if(e===w.CCW)return"ccw";if(e===w.CW)return"cw";throw Error("whoops")}(_.frontFace)}),f=(E=n.colorAttachmentFormats,n.megaStateDescriptor.attachmentsState.map(function(e,t){return{format:rn(E[t]),blend:function(e){if(!(rE(e.rgbBlendState)&&rE(e.alphaBlendState)))return{color:r_(e.rgbBlendState),alpha:r_(e.alphaBlendState)}}(e),writeMask:e.channelWriteMask}})),p=function(e,t){if(!(0,eA.Z)(e))return{format:rn(e),depthWriteEnabled:!!t.depthWrite,depthCompare:ru(t.depthCompare),depthBias:t.polygonOffset?t.polygonOffsetUnits:0,depthBiasSlopeScale:t.polygonOffset?t.polygonOffsetFactor:0,stencilFront:{compare:ru(t.stencilFront.compare),passOp:rl(t.stencilFront.passOp),failOp:rl(t.stencilFront.failOp),depthFailOp:rl(t.stencilFront.depthFailOp)},stencilBack:{compare:ru(t.stencilBack.compare),passOp:rl(t.stencilBack.passOp),failOp:rl(t.stencilBack.failOp),depthFailOp:rl(t.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}(n.depthStencilAttachmentFormat,n.megaStateDescriptor),h=void 0;null!==n.inputLayout&&(h=n.inputLayout.buffers);var S=n.sampleCount,N={layout:"auto",vertex:(0,ep.pi)((0,ep.pi)({},a),{buffers:h}),primitive:d,depthStencil:p,multisample:{count:S},fragment:(0,ep.pi)((0,ep.pi)({},o),{targets:f})};e.gpuRenderPipeline=this.device.createRenderPipeline(N)}}},e.prototype.createReadback=function(){return new rB({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new rm({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(e){var t=this.renderPassPool.pop();void 0===t&&(t=new rC(this));var r=this.frameCommandEncoderPool.pop();return void 0===r&&(r=this.device.createCommandEncoder()),t.beginRenderPass(r,e),t},e.prototype.createComputePass=function(){var e=this.computePassPool.pop();void 0===e&&(e=new rf);var t=this.frameCommandEncoderPool.pop();return void 0===t&&(t=this.device.createCommandEncoder()),e.beginComputePass(t),e},e.prototype.submitPass=function(e){e instanceof rC?(this.frameCommandEncoderPool.push(e.frameCommandEncoder),e.finish(),this.renderPassPool.push(e)):e instanceof rf&&(this.frameCommandEncoderPool.push(e.frameCommandEncoder),e.finish(),this.computePassPool.push(e))},e.prototype.copySubTexture2D=function(e,t,r,n,i,a,o){var s=this.device.createCommandEncoder(),_={texture:n.gpuTexture,origin:[i,a,0],mipLevel:0,aspect:"all"},E={texture:e.gpuTexture,origin:[t,r,0],mipLevel:0,aspect:"all"};eg(!!(n.usage&ec.COPY_SRC)),eg(!!(e.usage&ec.COPY_DST)),s.copyTextureToTexture(_,E,[n.width,n.height,o||1]),this.device.queue.submit([s.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(e,t,r){if(function(e){switch(eB(e)){case eo.BC1:case eo.BC2:case eo.BC3:case eo.BC4_SNORM:case eo.BC4_UNORM:case eo.BC5_SNORM:case eo.BC5_UNORM:return!0;default:return!1}}(e)){if(!this.featureTextureCompressionBC)return!1;var n=function(e){switch(eB(e)){case eo.BC1:case eo.BC2:case eo.BC3:case eo.BC4_SNORM:case eo.BC4_UNORM:case eo.BC5_SNORM:case eo.BC5_UNORM:return 4;default:return 1}}(e);return t%n==0&&r%n==0&&this.featureTextureCompressionBC}switch(e){case eE.U16_RGBA_NORM:case eE.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(e){return e.descriptor},e.prototype.queryRenderTarget=function(e){return e},e.prototype.setResourceName=function(e,t){if(e.name=t,e.type===x.Buffer){var r=e;r.gpuBuffer.label=t}else if(e.type===x.Texture){var r=e;r.gpuTexture.label=t,r.gpuTextureView.label=t}else if(e.type===x.RenderTarget){var r=e;r.gpuTexture.label=t,r.gpuTextureView.label=t}else if(e.type===x.Sampler){var r=e;r.gpuSampler.label=t}else if(e.type===x.RenderPipeline){var r=e;null!==r.gpuRenderPipeline&&(r.gpuRenderPipeline.label=t)}},e.prototype.setResourceLeakCheck=function(e,t){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(e){},e.prototype.pipelineQueryReady=function(e){return null!==e.gpuRenderPipeline},e.prototype.pipelineForceReady=function(e){this.createRenderPipelineInternal(e,!1)},e}(),rM=function(){function e(e){this.pluginOptions=e}return e.prototype.createSwapChain=function(e){return(0,ep.mG)(this,void 0,void 0,function(){var t,r,n,i,a,o;return(0,ep.Jh)(this,function(s){switch(s.label){case 0:if(void 0===globalThis.navigator.gpu)return[2,null];t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),r=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:r})];case 2:return t=s.sent(),[3,4];case 3:return console.log(s.sent()),[3,4];case 4:if(null===t)return[2,null];return n=["depth32float-stencil8","texture-compression-bc","float32-filterable"].filter(function(e){return t.features.has(e)}),[4,t.requestDevice({requiredFeatures:n})];case 5:if((i=s.sent())&&(a=this.pluginOptions.onContextLost,i.lost.then(function(){a&&a()})),null===i||!(o=e.getContext("webgpu")))return[2,null];s.label=6;case 6:return s.trys.push([6,8,,9]),[4,rr(this.pluginOptions.shaderCompilerPath)];case 7:case 8:return s.sent(),[3,9];case 9:return[2,new rI(t,i,e,o,t9,re&&new re)]}})})},e}()}}]);